<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HACC_GPM: HACCGPM::parallel Namespace Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">HACC_GPM<span id="projectnumber">&#160;0.0.1</span>
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d1/d3f/namespaceHACCGPM_1_1parallel.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">HACCGPM::parallel Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/da8/classHACCGPM_1_1parallel_1_1MemoryManager.html">MemoryManager</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:abcddbac52c4da4a8a55b5b9dbb3940ce"><td class="memItemLeft" align="right" valign="top">__device__ __forceinline__ int3&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html#abcddbac52c4da4a8a55b5b9dbb3940ce">get_local_index</a> (int idx, int nx, int ny, int nz)</td></tr>
<tr class="separator:abcddbac52c4da4a8a55b5b9dbb3940ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b1a8b06a15d4701087629fbebff3654"><td class="memItemLeft" align="right" valign="top">__device__ __forceinline__ int3&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html#a2b1a8b06a15d4701087629fbebff3654">get_global_index</a> (int idx, int ng, int nlocal, int <a class="el" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a>)</td></tr>
<tr class="separator:a2b1a8b06a15d4701087629fbebff3654"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cc116aa60cc101955046739bcfcf3bf"><td class="memItemLeft" align="right" valign="top">__device__ __forceinline__ float3&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html#a9cc116aa60cc101955046739bcfcf3bf">get_kmodes</a> (int3 idx3d, int ng, double d)</td></tr>
<tr class="separator:a9cc116aa60cc101955046739bcfcf3bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acac1f2241bc62f1bf39dce1c0d2f637e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html#acac1f2241bc62f1bf39dce1c0d2f637e">init_swfft</a> (<a class="el" href="../../d5/de1/structHACCGPM_1_1Params.html">HACCGPM::Params</a> &amp;params)</td></tr>
<tr class="separator:acac1f2241bc62f1bf39dce1c0d2f637e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac91e913d79581a70c40b74ad21ed968d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html#ac91e913d79581a70c40b74ad21ed968d">finalize_swfft</a> ()</td></tr>
<tr class="separator:ac91e913d79581a70c40b74ad21ed968d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6fb9d3fbd0ac120db603cad0fe58b40"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html#ab6fb9d3fbd0ac120db603cad0fe58b40">forward_fft</a> (<a class="el" href="../../da/d0d/haccgpm_8hpp.html#a27d89e2a5f98ab524846b9bac59ebf44">deviceFFT_t</a> *d_grid, int ng, int calls=0)</td></tr>
<tr class="separator:ab6fb9d3fbd0ac120db603cad0fe58b40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add12ee925b08f1eca77ec3d4c2b94aed"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html#add12ee925b08f1eca77ec3d4c2b94aed">backward_fft</a> (<a class="el" href="../../da/d0d/haccgpm_8hpp.html#a27d89e2a5f98ab524846b9bac59ebf44">deviceFFT_t</a> *d_grid, int ng, int calls=0)</td></tr>
<tr class="separator:add12ee925b08f1eca77ec3d4c2b94aed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a988a5e3e292fca5fb93bd5c754ff9e3c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html#a988a5e3e292fca5fb93bd5c754ff9e3c">timing_stats</a> (<a class="el" href="../../da/d0d/haccgpm_8hpp.html#aa790b6767cf9152c32b179d29c46e3ef">CPUTimer_t</a> t, <a class="el" href="../../da/d0d/haccgpm_8hpp.html#aa790b6767cf9152c32b179d29c46e3ef">CPUTimer_t</a> *mint, <a class="el" href="../../da/d0d/haccgpm_8hpp.html#aa790b6767cf9152c32b179d29c46e3ef">CPUTimer_t</a> *maxt, <a class="el" href="../../da/d0d/haccgpm_8hpp.html#aa790b6767cf9152c32b179d29c46e3ef">CPUTimer_t</a> *meant)</td></tr>
<tr class="separator:a988a5e3e292fca5fb93bd5c754ff9e3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a732c4638e4b8fc8959263d43cc8cccdf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../da/d0d/haccgpm_8hpp.html#aa790b6767cf9152c32b179d29c46e3ef">CPUTimer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html#a732c4638e4b8fc8959263d43cc8cccdf">initLoadIntoBuffers</a> (float4 **swap_pos, float4 **swap_vel, int *n_swaps, float4 *d_pos, float4 *d_vel, int nlocal, int3 local_grid_size, int n_particles, int blockSize, int <a class="el" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a>, int calls=0)</td></tr>
<tr class="separator:a732c4638e4b8fc8959263d43cc8cccdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab67a1d4d424d75f9fd6046323ae44ec1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html#ab67a1d4d424d75f9fd6046323ae44ec1">initTransferParticles</a> (<a class="el" href="../../d5/de1/structHACCGPM_1_1Params.html">HACCGPM::Params</a> &amp;params, <a class="el" href="../../db/da8/classHACCGPM_1_1parallel_1_1MemoryManager.html">HACCGPM::parallel::MemoryManager</a> &amp;mem, int calls=0)</td></tr>
<tr class="separator:ab67a1d4d424d75f9fd6046323ae44ec1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada405e83d092ec5f01435cb23d1e2927"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../da/d0d/haccgpm_8hpp.html#aa790b6767cf9152c32b179d29c46e3ef">CPUTimer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html#ada405e83d092ec5f01435cb23d1e2927">insertParticles</a> (float4 *d_pos, float4 *d_vel, float4 *new_pos, float4 *new_vel, int n_new, int remaining, int n_particles, int blockSize, int <a class="el" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a>, int calls=0)</td></tr>
<tr class="separator:ada405e83d092ec5f01435cb23d1e2927"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31a4b3e867d91495908cb284b049c610"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../da/d0d/haccgpm_8hpp.html#aa790b6767cf9152c32b179d29c46e3ef">CPUTimer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html#a31a4b3e867d91495908cb284b049c610">loadGridBuffers</a> (float *d_extragrid, float *h_transfer, int3 local_grid_size, int blockSize, int <a class="el" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a>, int calls=0)</td></tr>
<tr class="separator:a31a4b3e867d91495908cb284b049c610"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af10a44b19c6bfe6e4edd7776b4a0df5c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html#af10a44b19c6bfe6e4edd7776b4a0df5c">GenerateDisplacementIC</a> (const char *params_file, <a class="el" href="../../db/da8/classHACCGPM_1_1parallel_1_1MemoryManager.html">HACCGPM::parallel::MemoryManager</a> *mem, int ng, double rl, double z, double deltaT, double fscal, int seed, int blockSize, int <a class="el" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a>, int world_size, int nlocal, int *local_grid_size, int calls=0)</td></tr>
<tr class="separator:af10a44b19c6bfe6e4edd7776b4a0df5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02e404ddd45f930637353436ca2ad1da"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html#a02e404ddd45f930637353436ca2ad1da">CIC</a> (<a class="el" href="../../da/d0d/haccgpm_8hpp.html#a27d89e2a5f98ab524846b9bac59ebf44">deviceFFT_t</a> *d_grid, float *d_extragrid, float4 *d_pos, int ng, int n_particles, int *local_grid_size, int blockSize, int <a class="el" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a>, int world_size, int calls=0)</td></tr>
<tr class="separator:a02e404ddd45f930637353436ca2ad1da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac66d632437a71d40e49ac15c25b5a26f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html#ac66d632437a71d40e49ac15c25b5a26f">gridExchange</a> (float *d_extragrid, int3 local_grid_size, int <a class="el" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a>, int world_size, int blockSize, int calls=0)</td></tr>
<tr class="separator:ac66d632437a71d40e49ac15c25b5a26f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3be1b15261819bb255780e9c34d6ad31"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html#a3be1b15261819bb255780e9c34d6ad31">printTransferTimes</a> (int <a class="el" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a>)</td></tr>
<tr class="separator:a3be1b15261819bb255780e9c34d6ad31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafb47a3e84785288897c7c4c20d7c39f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html#aafb47a3e84785288897c7c4c20d7c39f">printCICTimes</a> (int <a class="el" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a>)</td></tr>
<tr class="separator:aafb47a3e84785288897c7c4c20d7c39f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a709934c2ca1db4459e610dc7f7441d7d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html#a709934c2ca1db4459e610dc7f7441d7d">printTransferBytes</a> (int <a class="el" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a>)</td></tr>
<tr class="separator:a709934c2ca1db4459e610dc7f7441d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a123085a590cbc09148ef1558564afe8d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html#a123085a590cbc09148ef1558564afe8d">printFFTStats</a> (int <a class="el" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a>)</td></tr>
<tr class="separator:a123085a590cbc09148ef1558564afe8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="add12ee925b08f1eca77ec3d4c2b94aed" name="add12ee925b08f1eca77ec3d4c2b94aed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add12ee925b08f1eca77ec3d4c2b94aed">&#9670;&#160;</a></span>backward_fft()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HACCGPM::parallel::backward_fft </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../da/d0d/haccgpm_8hpp.html#a27d89e2a5f98ab524846b9bac59ebf44">deviceFFT_t</a> *&#160;</td>
          <td class="paramname"><em>d_grid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ng</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>calls</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/df7/swfftmanager_8cpp_source.html#l00075">75</a> of file <a class="el" href="../../d4/df7/swfftmanager_8cpp_source.html">swfftmanager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   75</span>                                                                        {</div>
<div class="line"><span class="lineno">   76</span>    <a class="code hl_define" href="../../d1/dc2/ccamb_8c.html#aede6a850e442b96dd236d1bed8bf19e5">getIndent</a>(calls);</div>
<div class="line"><span class="lineno">   77</span><span class="preprocessor">    #ifdef VerboseFFT</span></div>
<div class="line"><span class="lineno">   78</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="../../d4/df7/swfftmanager_8cpp.html#a5b209e45ba80998575b1316f55e5c9e8">ffts</a>-&gt;<a class="code hl_variable" href="../../d0/d55/classFFTManager.html#a780a726604569ad5c91595872b46a8c8">dist</a>.world_rank == 0)printf(<span class="stringliteral">&quot;%sbackward_fft was called with\n%s   ng %d\n&quot;</span>,indent,indent,ng);</div>
<div class="line"><span class="lineno">   79</span><span class="preprocessor">    #endif</span></div>
<div class="line"><span class="lineno">   80</span>    <a class="code hl_typedef" href="../../da/d0d/haccgpm_8hpp.html#aa790b6767cf9152c32b179d29c46e3ef">CPUTimer_t</a> start = <a class="code hl_function" href="../../da/d0d/haccgpm_8hpp.html#a78588985bccaffcba4aa40467d7961d6">CPUTimer</a>();</div>
<div class="line"><span class="lineno">   81</span>    <a class="code hl_variable" href="../../d4/df7/swfftmanager_8cpp.html#a5b209e45ba80998575b1316f55e5c9e8">ffts</a>-&gt;<a class="code hl_variable" href="../../d0/d55/classFFTManager.html#a42254e690a0cf7eb81b3570cebd47957">dfft</a>.backward(d_grid);</div>
<div class="line"><span class="lineno">   82</span>    <a class="code hl_typedef" href="../../da/d0d/haccgpm_8hpp.html#aa790b6767cf9152c32b179d29c46e3ef">CPUTimer_t</a> end = <a class="code hl_function" href="../../da/d0d/haccgpm_8hpp.html#a78588985bccaffcba4aa40467d7961d6">CPUTimer</a>();</div>
<div class="line"><span class="lineno">   83</span>    <a class="code hl_variable" href="../../d4/df7/swfftmanager_8cpp.html#a98af84effc7fdd349e43f89c9667ce36">BACKWARD_FFT_CALLS</a>++;</div>
<div class="line"><span class="lineno">   84</span>    <a class="code hl_variable" href="../../d4/df7/swfftmanager_8cpp.html#af5b9e09cdd707cf65cb5b5613fe5b7d7">BACKWARD_FFT_TIME</a> += end-start;</div>
<div class="line"><span class="lineno">   85</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="../../d4/df7/swfftmanager_8cpp.html#a5b209e45ba80998575b1316f55e5c9e8">ffts</a>-&gt;<a class="code hl_variable" href="../../d0/d55/classFFTManager.html#a780a726604569ad5c91595872b46a8c8">dist</a>.world_rank == 0)printf(<span class="stringliteral">&quot;%s   backward_fft took %llu us\n&quot;</span>,indent,end - start);</div>
<div class="line"><span class="lineno">   86</span>}</div>
<div class="ttc" id="accamb_8c_html_aede6a850e442b96dd236d1bed8bf19e5"><div class="ttname"><a href="../../d1/dc2/ccamb_8c.html#aede6a850e442b96dd236d1bed8bf19e5">getIndent</a></div><div class="ttdeci">#define getIndent(calls)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/dc2/ccamb_8c_source.html#l00009">ccamb.c:9</a></div></div>
<div class="ttc" id="aclassFFTManager_html_a42254e690a0cf7eb81b3570cebd47957"><div class="ttname"><a href="../../d0/d55/classFFTManager.html#a42254e690a0cf7eb81b3570cebd47957">FFTManager::dfft</a></div><div class="ttdeci">Dfft dfft</div><div class="ttdef"><b>Definition</b> <a href="../../d4/df7/swfftmanager_8cpp_source.html#l00019">swfftmanager.cpp:19</a></div></div>
<div class="ttc" id="aclassFFTManager_html_a780a726604569ad5c91595872b46a8c8"><div class="ttname"><a href="../../d0/d55/classFFTManager.html#a780a726604569ad5c91595872b46a8c8">FFTManager::dist</a></div><div class="ttdeci">Distribution dist</div><div class="ttdef"><b>Definition</b> <a href="../../d4/df7/swfftmanager_8cpp_source.html#l00018">swfftmanager.cpp:18</a></div></div>
<div class="ttc" id="ahaccgpm_8hpp_html_a78588985bccaffcba4aa40467d7961d6"><div class="ttname"><a href="../../da/d0d/haccgpm_8hpp.html#a78588985bccaffcba4aa40467d7961d6">CPUTimer</a></div><div class="ttdeci">unsigned long long CPUTimer(unsigned long long start=0)</div><div class="ttdef"><b>Definition</b> <a href="../../da/d0d/haccgpm_8hpp_source.html#l00014">haccgpm.hpp:14</a></div></div>
<div class="ttc" id="ahaccgpm_8hpp_html_aa790b6767cf9152c32b179d29c46e3ef"><div class="ttname"><a href="../../da/d0d/haccgpm_8hpp.html#aa790b6767cf9152c32b179d29c46e3ef">CPUTimer_t</a></div><div class="ttdeci">unsigned long long CPUTimer_t</div><div class="ttdef"><b>Definition</b> <a href="../../da/d0d/haccgpm_8hpp_source.html#l00012">haccgpm.hpp:12</a></div></div>
<div class="ttc" id="aswfftmanager_8cpp_html_a5b209e45ba80998575b1316f55e5c9e8"><div class="ttname"><a href="../../d4/df7/swfftmanager_8cpp.html#a5b209e45ba80998575b1316f55e5c9e8">ffts</a></div><div class="ttdeci">FFTManager * ffts</div><div class="ttdef"><b>Definition</b> <a href="../../d4/df7/swfftmanager_8cpp_source.html#l00051">swfftmanager.cpp:51</a></div></div>
<div class="ttc" id="aswfftmanager_8cpp_html_a98af84effc7fdd349e43f89c9667ce36"><div class="ttname"><a href="../../d4/df7/swfftmanager_8cpp.html#a98af84effc7fdd349e43f89c9667ce36">BACKWARD_FFT_CALLS</a></div><div class="ttdeci">int BACKWARD_FFT_CALLS</div><div class="ttdef"><b>Definition</b> <a href="../../d4/df7/swfftmanager_8cpp_source.html#l00014">swfftmanager.cpp:14</a></div></div>
<div class="ttc" id="aswfftmanager_8cpp_html_af5b9e09cdd707cf65cb5b5613fe5b7d7"><div class="ttname"><a href="../../d4/df7/swfftmanager_8cpp.html#af5b9e09cdd707cf65cb5b5613fe5b7d7">BACKWARD_FFT_TIME</a></div><div class="ttdeci">CPUTimer_t BACKWARD_FFT_TIME</div><div class="ttdef"><b>Definition</b> <a href="../../d4/df7/swfftmanager_8cpp_source.html#l00013">swfftmanager.cpp:13</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d4/df7/swfftmanager_8cpp_source.html#l00014">BACKWARD_FFT_CALLS</a>, <a class="el" href="../../d4/df7/swfftmanager_8cpp_source.html#l00013">BACKWARD_FFT_TIME</a>, <a class="el" href="../../da/d0d/haccgpm_8hpp_source.html#l00014">CPUTimer()</a>, <a class="el" href="../../d4/df7/swfftmanager_8cpp_source.html#l00019">FFTManager::dfft</a>, <a class="el" href="../../d4/df7/swfftmanager_8cpp_source.html#l00018">FFTManager::dist</a>, <a class="el" href="../../d4/df7/swfftmanager_8cpp_source.html#l00051">ffts</a>, and <a class="el" href="../../d1/dc2/ccamb_8c_source.html#l00009">getIndent</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d3b/initializer_8cu_source.html#l00414">GenerateDisplacementIC()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/d3f/namespaceHACCGPM_1_1parallel_add12ee925b08f1eca77ec3d4c2b94aed_cgraph.png" border="0" usemap="#ad1/d3f/namespaceHACCGPM_1_1parallel_add12ee925b08f1eca77ec3d4c2b94aed_cgraph" alt=""/></div>
<map name="ad1/d3f/namespaceHACCGPM_1_1parallel_add12ee925b08f1eca77ec3d4c2b94aed_cgraph" id="ad1/d3f/namespaceHACCGPM_1_1parallel_add12ee925b08f1eca77ec3d4c2b94aed_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,153,45"/>
<area shape="rect" href="../../da/d0d/haccgpm_8hpp.html#a78588985bccaffcba4aa40467d7961d6" title=" " alt="" coords="201,13,285,38"/>
<area shape="poly" title=" " alt="" coords="154,23,188,23,188,28,154,28"/>
</map>
</div>

</div>
</div>
<a id="a02e404ddd45f930637353436ca2ad1da" name="a02e404ddd45f930637353436ca2ad1da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02e404ddd45f930637353436ca2ad1da">&#9670;&#160;</a></span>CIC()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HACCGPM::parallel::CIC </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../da/d0d/haccgpm_8hpp.html#a27d89e2a5f98ab524846b9bac59ebf44">deviceFFT_t</a> *&#160;</td>
          <td class="paramname"><em>d_grid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>d_extragrid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float4 *&#160;</td>
          <td class="paramname"><em>d_pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ng</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n_particles</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>local_grid_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>blockSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>world_rank</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>world_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>calls</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dce/cic_8cu_source.html#l00228">228</a> of file <a class="el" href="../../d6/dce/cic_8cu_source.html">cic.cu</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  228</span>                                                                                                                                                                                        {</div>
<div class="line"><span class="lineno">  229</span>    <a class="code hl_typedef" href="../../da/d0d/haccgpm_8hpp.html#aa790b6767cf9152c32b179d29c46e3ef">CPUTimer_t</a> start = <a class="code hl_function" href="../../da/d0d/haccgpm_8hpp.html#a78588985bccaffcba4aa40467d7961d6">CPUTimer</a>();</div>
<div class="line"><span class="lineno">  230</span>    <span class="keywordtype">int</span> numBlocks = (n_particles + (blockSize - 1))/blockSize;</div>
<div class="line"><span class="lineno">  231</span>    int3 local_grid_size = make_int3(local_grid_size_[0],local_grid_size_[1],local_grid_size_[2]);</div>
<div class="line"><span class="lineno">  232</span>    <a class="code hl_define" href="../../d1/dc2/ccamb_8c.html#aede6a850e442b96dd236d1bed8bf19e5">getIndent</a>(calls);</div>
<div class="line"><span class="lineno">  233</span><span class="preprocessor">    #ifdef VerboseUpdate</span></div>
<div class="line"><span class="lineno">  234</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a> == 0)printf(<span class="stringliteral">&quot;%sCIC was called with\n%s   blockSize %d\n%s   numBlocks %d\n&quot;</span>,indent,indent,blockSize,indent,numBlocks);</div>
<div class="line"><span class="lineno">  235</span><span class="preprocessor">    #endif</span></div>
<div class="line"><span class="lineno">  236</span>    <a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#a28fb452217abf040d6df7890f94a54b9">cudaCall</a>(cudaMemset,d_tempgrid,0,<span class="keyword">sizeof</span>(<span class="keywordtype">float</span>)*(local_grid_size.x)*(local_grid_size.y)*(local_grid_size.z));</div>
<div class="line"><span class="lineno">  237</span>    <a class="code hl_variable" href="../../d6/dce/cic_8cu.html#ac76179fff32b3529b4a5d73452d35b9d">CIC_KERNEL_TIME</a> += <a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#aeb036429c3ef20a1b4d863bf03ff5648">InvokeGPUKernelParallel</a>(<a class="code hl_function" href="../../d6/dce/cic_8cu.html#aadea9eea5f5984f3f9792f4f4b1c8cbe">CICKernelParallel</a>,numBlocks,blockSize,d_tempgrid,d_pos,ng,local_grid_size,n_particles,1.0f);</div>
<div class="line"><span class="lineno">  238</span>    </div>
<div class="line"><span class="lineno">  239</span>    <span class="comment">//HACCGPM::parallel::gridExchange(d_extragrid,local_grid_size,world_rank,world_size,blockSize);</span></div>
<div class="line"><span class="lineno">  240</span>    </div>
<div class="line"><span class="lineno">  241</span>    <a class="code hl_typedef" href="../../da/d0d/haccgpm_8hpp.html#aa790b6767cf9152c32b179d29c46e3ef">CPUTimer_t</a> end = <a class="code hl_function" href="../../da/d0d/haccgpm_8hpp.html#a78588985bccaffcba4aa40467d7961d6">CPUTimer</a>();</div>
<div class="line"><span class="lineno">  242</span>    <a class="code hl_typedef" href="../../da/d0d/haccgpm_8hpp.html#aa790b6767cf9152c32b179d29c46e3ef">CPUTimer_t</a> t = end-start;</div>
<div class="line"><span class="lineno">  243</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a> == 0)printf(<span class="stringliteral">&quot;%s   CIC took %llu us\n&quot;</span>,indent,t);</div>
<div class="line"><span class="lineno">  244</span>    <a class="code hl_variable" href="../../d6/dce/cic_8cu.html#ae55de4065f3d7f164bf46a83f62a5591">CIC_TIME</a> += t;</div>
<div class="line"><span class="lineno">  245</span>    <a class="code hl_variable" href="../../d6/dce/cic_8cu.html#a793ccc2e7f39360df20ee3f323e3fb8d">CIC_CALLS</a> += 1;</div>
<div class="line"><span class="lineno">  246</span>}</div>
<div class="ttc" id="accamb_8c_html_a0be0ed3102aab1d72782301d75cf570b"><div class="ttname"><a href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a></div><div class="ttdeci">int world_rank</div><div class="ttdef"><b>Definition</b> <a href="../../d1/dc2/ccamb_8c_source.html#l00020">ccamb.c:20</a></div></div>
<div class="ttc" id="acic_8cu_html_a793ccc2e7f39360df20ee3f323e3fb8d"><div class="ttname"><a href="../../d6/dce/cic_8cu.html#a793ccc2e7f39360df20ee3f323e3fb8d">CIC_CALLS</a></div><div class="ttdeci">int CIC_CALLS</div><div class="ttdef"><b>Definition</b> <a href="../../d6/dce/cic_8cu_source.html#l00009">cic.cu:9</a></div></div>
<div class="ttc" id="acic_8cu_html_aadea9eea5f5984f3f9792f4f4b1c8cbe"><div class="ttname"><a href="../../d6/dce/cic_8cu.html#aadea9eea5f5984f3f9792f4f4b1c8cbe">CICKernelParallel</a></div><div class="ttdeci">__global__ void CICKernelParallel(float *__restrict d_grid, const float4 *__restrict d_pos, int ng, int3 local_grid_size, int n_particles, float mass)</div><div class="ttdef"><b>Definition</b> <a href="../../d6/dce/cic_8cu_source.html#l00180">cic.cu:180</a></div></div>
<div class="ttc" id="acic_8cu_html_ac76179fff32b3529b4a5d73452d35b9d"><div class="ttname"><a href="../../d6/dce/cic_8cu.html#ac76179fff32b3529b4a5d73452d35b9d">CIC_KERNEL_TIME</a></div><div class="ttdeci">CPUTimer_t CIC_KERNEL_TIME</div><div class="ttdef"><b>Definition</b> <a href="../../d6/dce/cic_8cu_source.html#l00008">cic.cu:8</a></div></div>
<div class="ttc" id="acic_8cu_html_ae55de4065f3d7f164bf46a83f62a5591"><div class="ttname"><a href="../../d6/dce/cic_8cu.html#ae55de4065f3d7f164bf46a83f62a5591">CIC_TIME</a></div><div class="ttdeci">CPUTimer_t CIC_TIME</div><div class="ttdef"><b>Definition</b> <a href="../../d6/dce/cic_8cu_source.html#l00007">cic.cu:7</a></div></div>
<div class="ttc" id="ahaccgpm_8hpp_html_a28fb452217abf040d6df7890f94a54b9"><div class="ttname"><a href="../../da/d0d/haccgpm_8hpp.html#a28fb452217abf040d6df7890f94a54b9">cudaCall</a></div><div class="ttdeci">#define cudaCall(func,...)</div><div class="ttdef"><b>Definition</b> <a href="../../da/d0d/haccgpm_8hpp_source.html#l00037">haccgpm.hpp:37</a></div></div>
<div class="ttc" id="ahaccgpm_8hpp_html_aeb036429c3ef20a1b4d863bf03ff5648"><div class="ttname"><a href="../../da/d0d/haccgpm_8hpp.html#aeb036429c3ef20a1b4d863bf03ff5648">InvokeGPUKernelParallel</a></div><div class="ttdeci">#define InvokeGPUKernelParallel(func, numBlocks, blockSize,...)</div><div class="ttdef"><b>Definition</b> <a href="../../da/d0d/haccgpm_8hpp_source.html#l00041">haccgpm.hpp:41</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d6/dce/cic_8cu_source.html#l00009">CIC_CALLS</a>, <a class="el" href="../../d6/dce/cic_8cu_source.html#l00008">CIC_KERNEL_TIME</a>, <a class="el" href="../../d6/dce/cic_8cu_source.html#l00007">CIC_TIME</a>, <a class="el" href="../../d6/dce/cic_8cu_source.html#l00180">CICKernelParallel()</a>, <a class="el" href="../../da/d0d/haccgpm_8hpp_source.html#l00014">CPUTimer()</a>, <a class="el" href="../../da/d0d/haccgpm_8hpp_source.html#l00037">cudaCall</a>, <a class="el" href="../../d1/dc2/ccamb_8c_source.html#l00009">getIndent</a>, <a class="el" href="../../da/d0d/haccgpm_8hpp_source.html#l00041">InvokeGPUKernelParallel</a>, and <a class="el" href="../../d1/dc2/ccamb_8c_source.html#l00020">world_rank</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d15/driver_8cpp_source.html#l00123">parallel()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/d3f/namespaceHACCGPM_1_1parallel_a02e404ddd45f930637353436ca2ad1da_cgraph.png" border="0" usemap="#ad1/d3f/namespaceHACCGPM_1_1parallel_a02e404ddd45f930637353436ca2ad1da_cgraph" alt=""/></div>
<map name="ad1/d3f/namespaceHACCGPM_1_1parallel_a02e404ddd45f930637353436ca2ad1da_cgraph" id="ad1/d3f/namespaceHACCGPM_1_1parallel_a02e404ddd45f930637353436ca2ad1da_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,177,56"/>
<area shape="rect" href="../../d6/dce/cic_8cu.html#aadea9eea5f5984f3f9792f4f4b1c8cbe" title=" " alt="" coords="225,5,352,31"/>
<area shape="poly" title=" " alt="" coords="178,30,212,25,212,30,178,35"/>
<area shape="rect" href="../../da/d0d/haccgpm_8hpp.html#a78588985bccaffcba4aa40467d7961d6" title=" " alt="" coords="247,55,331,80"/>
<area shape="poly" title=" " alt="" coords="178,51,234,58,233,63,178,57"/>
</map>
</div>

</div>
</div>
<a id="ac91e913d79581a70c40b74ad21ed968d" name="ac91e913d79581a70c40b74ad21ed968d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac91e913d79581a70c40b74ad21ed968d">&#9670;&#160;</a></span>finalize_swfft()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HACCGPM::parallel::finalize_swfft </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/df7/swfftmanager_8cpp_source.html#l00058">58</a> of file <a class="el" href="../../d4/df7/swfftmanager_8cpp_source.html">swfftmanager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   58</span>                                    {</div>
<div class="line"><span class="lineno">   59</span>    <span class="keyword">delete</span> <a class="code hl_variable" href="../../d4/df7/swfftmanager_8cpp.html#a5b209e45ba80998575b1316f55e5c9e8">ffts</a>;</div>
<div class="line"><span class="lineno">   60</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d4/df7/swfftmanager_8cpp_source.html#l00051">ffts</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d15/driver_8cpp_source.html#l00123">parallel()</a>.</p>

</div>
</div>
<a id="ab6fb9d3fbd0ac120db603cad0fe58b40" name="ab6fb9d3fbd0ac120db603cad0fe58b40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6fb9d3fbd0ac120db603cad0fe58b40">&#9670;&#160;</a></span>forward_fft()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HACCGPM::parallel::forward_fft </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../da/d0d/haccgpm_8hpp.html#a27d89e2a5f98ab524846b9bac59ebf44">deviceFFT_t</a> *&#160;</td>
          <td class="paramname"><em>d_grid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ng</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>calls</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/df7/swfftmanager_8cpp_source.html#l00062">62</a> of file <a class="el" href="../../d4/df7/swfftmanager_8cpp_source.html">swfftmanager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   62</span>                                                                       {</div>
<div class="line"><span class="lineno">   63</span>    <a class="code hl_define" href="../../d1/dc2/ccamb_8c.html#aede6a850e442b96dd236d1bed8bf19e5">getIndent</a>(calls);</div>
<div class="line"><span class="lineno">   64</span><span class="preprocessor">    #ifdef VerboseFFT</span></div>
<div class="line"><span class="lineno">   65</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="../../d4/df7/swfftmanager_8cpp.html#a5b209e45ba80998575b1316f55e5c9e8">ffts</a>-&gt;<a class="code hl_variable" href="../../d0/d55/classFFTManager.html#a780a726604569ad5c91595872b46a8c8">dist</a>.world_rank == 0)printf(<span class="stringliteral">&quot;%sforward_fft was called with\n%s   ng %d\n&quot;</span>,indent,indent,ng);</div>
<div class="line"><span class="lineno">   66</span><span class="preprocessor">    #endif</span></div>
<div class="line"><span class="lineno">   67</span>    <a class="code hl_typedef" href="../../da/d0d/haccgpm_8hpp.html#aa790b6767cf9152c32b179d29c46e3ef">CPUTimer_t</a> start = <a class="code hl_function" href="../../da/d0d/haccgpm_8hpp.html#a78588985bccaffcba4aa40467d7961d6">CPUTimer</a>();</div>
<div class="line"><span class="lineno">   68</span>    <a class="code hl_variable" href="../../d4/df7/swfftmanager_8cpp.html#a5b209e45ba80998575b1316f55e5c9e8">ffts</a>-&gt;<a class="code hl_variable" href="../../d0/d55/classFFTManager.html#a42254e690a0cf7eb81b3570cebd47957">dfft</a>.forward(d_grid);</div>
<div class="line"><span class="lineno">   69</span>    <a class="code hl_typedef" href="../../da/d0d/haccgpm_8hpp.html#aa790b6767cf9152c32b179d29c46e3ef">CPUTimer_t</a> end = <a class="code hl_function" href="../../da/d0d/haccgpm_8hpp.html#a78588985bccaffcba4aa40467d7961d6">CPUTimer</a>();</div>
<div class="line"><span class="lineno">   70</span>    <a class="code hl_variable" href="../../d4/df7/swfftmanager_8cpp.html#a9c343dbee29f4a84fea2a139215aaf3b">FORWARD_FFT_CALLS</a>++;</div>
<div class="line"><span class="lineno">   71</span>    <a class="code hl_variable" href="../../d4/df7/swfftmanager_8cpp.html#a7409c91becef23e50d820551897fbd93">FORWARD_FFT_TIME</a> += end-start;</div>
<div class="line"><span class="lineno">   72</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="../../d4/df7/swfftmanager_8cpp.html#a5b209e45ba80998575b1316f55e5c9e8">ffts</a>-&gt;<a class="code hl_variable" href="../../d0/d55/classFFTManager.html#a780a726604569ad5c91595872b46a8c8">dist</a>.world_rank == 0)printf(<span class="stringliteral">&quot;%s   forward_fft took %llu us\n&quot;</span>,indent,end - start);</div>
<div class="line"><span class="lineno">   73</span>}</div>
<div class="ttc" id="aswfftmanager_8cpp_html_a7409c91becef23e50d820551897fbd93"><div class="ttname"><a href="../../d4/df7/swfftmanager_8cpp.html#a7409c91becef23e50d820551897fbd93">FORWARD_FFT_TIME</a></div><div class="ttdeci">CPUTimer_t FORWARD_FFT_TIME</div><div class="ttdef"><b>Definition</b> <a href="../../d4/df7/swfftmanager_8cpp_source.html#l00011">swfftmanager.cpp:11</a></div></div>
<div class="ttc" id="aswfftmanager_8cpp_html_a9c343dbee29f4a84fea2a139215aaf3b"><div class="ttname"><a href="../../d4/df7/swfftmanager_8cpp.html#a9c343dbee29f4a84fea2a139215aaf3b">FORWARD_FFT_CALLS</a></div><div class="ttdeci">int FORWARD_FFT_CALLS</div><div class="ttdef"><b>Definition</b> <a href="../../d4/df7/swfftmanager_8cpp_source.html#l00012">swfftmanager.cpp:12</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/d0d/haccgpm_8hpp_source.html#l00014">CPUTimer()</a>, <a class="el" href="../../d4/df7/swfftmanager_8cpp_source.html#l00019">FFTManager::dfft</a>, <a class="el" href="../../d4/df7/swfftmanager_8cpp_source.html#l00018">FFTManager::dist</a>, <a class="el" href="../../d4/df7/swfftmanager_8cpp_source.html#l00051">ffts</a>, <a class="el" href="../../d4/df7/swfftmanager_8cpp_source.html#l00012">FORWARD_FFT_CALLS</a>, <a class="el" href="../../d4/df7/swfftmanager_8cpp_source.html#l00011">FORWARD_FFT_TIME</a>, and <a class="el" href="../../d1/dc2/ccamb_8c_source.html#l00009">getIndent</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d3b/initializer_8cu_source.html#l00344">GenerateFourierAmplitudesParallel()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/d3f/namespaceHACCGPM_1_1parallel_ab6fb9d3fbd0ac120db603cad0fe58b40_cgraph.png" border="0" usemap="#ad1/d3f/namespaceHACCGPM_1_1parallel_ab6fb9d3fbd0ac120db603cad0fe58b40_cgraph" alt=""/></div>
<map name="ad1/d3f/namespaceHACCGPM_1_1parallel_ab6fb9d3fbd0ac120db603cad0fe58b40_cgraph" id="ad1/d3f/namespaceHACCGPM_1_1parallel_ab6fb9d3fbd0ac120db603cad0fe58b40_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,153,45"/>
<area shape="rect" href="../../da/d0d/haccgpm_8hpp.html#a78588985bccaffcba4aa40467d7961d6" title=" " alt="" coords="201,13,285,38"/>
<area shape="poly" title=" " alt="" coords="154,23,188,23,188,28,154,28"/>
</map>
</div>

</div>
</div>
<a id="af10a44b19c6bfe6e4edd7776b4a0df5c" name="af10a44b19c6bfe6e4edd7776b4a0df5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af10a44b19c6bfe6e4edd7776b4a0df5c">&#9670;&#160;</a></span>GenerateDisplacementIC()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HACCGPM::parallel::GenerateDisplacementIC </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>params_file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/da8/classHACCGPM_1_1parallel_1_1MemoryManager.html">HACCGPM::parallel::MemoryManager</a> *&#160;</td>
          <td class="paramname"><em>mem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ng</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>rl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>z</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>deltaT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>fscal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>seed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>blockSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>world_rank</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>world_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nlocal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>local_grid_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>calls</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d3b/initializer_8cu_source.html#l00414">414</a> of file <a class="el" href="../../de/d3b/initializer_8cu_source.html">initializer.cu</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  414</span>                                                                                                                                                                                                                                                                      {</div>
<div class="line"><span class="lineno">  415</span> </div>
<div class="line"><span class="lineno">  416</span>    <span class="keywordtype">int</span> numBlocks = (nlocal)/blockSize;</div>
<div class="line"><span class="lineno">  417</span>    <a class="code hl_define" href="../../d1/dc2/ccamb_8c.html#aede6a850e442b96dd236d1bed8bf19e5">getIndent</a>(calls);</div>
<div class="line"><span class="lineno">  418</span> </div>
<div class="line"><span class="lineno">  419</span><span class="preprocessor">    #ifdef VerboseInitializer</span></div>
<div class="line"><span class="lineno">  420</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a> == 0)printf(<span class="stringliteral">&quot;%sGenerateDisplacementIC was called with\n%s   blockSize %d\n%s   numBlocks %d\n%s   params %s\n&quot;</span>,indent,indent,blockSize,indent,numBlocks,indent,params_file);</div>
<div class="line"><span class="lineno">  421</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a> == 0)printf(<span class="stringliteral">&quot;%s   Calling GenerateFourierAmplitudesParallel...\n&quot;</span>,indent);</div>
<div class="line"><span class="lineno">  422</span><span class="preprocessor">    #endif</span></div>
<div class="line"><span class="lineno">  423</span> </div>
<div class="line"><span class="lineno">  424</span>    <a class="code hl_function" href="../../de/d3b/initializer_8cu.html#a8d1235c9dcec22662164f05aca0fe102">GenerateFourierAmplitudesParallel</a>(params_file, mem-&gt;<a class="code hl_variable" href="../../db/da8/classHACCGPM_1_1parallel_1_1MemoryManager.html#a7c0b83a42a12155d7e9c10919293c797">d_grid</a>, ng, rl, z, seed, blockSize, <a class="code hl_variable" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a>, world_size, nlocal, calls+1);</div>
<div class="line"><span class="lineno">  425</span> </div>
<div class="line"><span class="lineno">  426</span><span class="preprocessor">    #ifdef VerboseInitializer</span></div>
<div class="line"><span class="lineno">  427</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a> == 0)printf(<span class="stringliteral">&quot;%s      Called GenerateFourierAmplitudes.\n&quot;</span>,indent);</div>
<div class="line"><span class="lineno">  428</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a> == 0)printf(<span class="stringliteral">&quot;%s   Allocating d_sx, d_sy, d_sz...\n&quot;</span>,indent);</div>
<div class="line"><span class="lineno">  429</span><span class="preprocessor">    #endif</span></div>
<div class="line"><span class="lineno">  430</span> </div>
<div class="line"><span class="lineno">  431</span>    <a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#a27d89e2a5f98ab524846b9bac59ebf44">deviceFFT_t</a>* d_sx; <a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#a28fb452217abf040d6df7890f94a54b9">cudaCall</a>(cudaMalloc,&amp;d_sx,<span class="keyword">sizeof</span>(<a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#a27d89e2a5f98ab524846b9bac59ebf44">deviceFFT_t</a>)*nlocal);</div>
<div class="line"><span class="lineno">  432</span>    <a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#a27d89e2a5f98ab524846b9bac59ebf44">deviceFFT_t</a>* d_sy; <a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#a28fb452217abf040d6df7890f94a54b9">cudaCall</a>(cudaMalloc,&amp;d_sy,<span class="keyword">sizeof</span>(<a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#a27d89e2a5f98ab524846b9bac59ebf44">deviceFFT_t</a>)*nlocal);</div>
<div class="line"><span class="lineno">  433</span>    <a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#a27d89e2a5f98ab524846b9bac59ebf44">deviceFFT_t</a>* d_sz; <a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#a28fb452217abf040d6df7890f94a54b9">cudaCall</a>(cudaMalloc,&amp;d_sz,<span class="keyword">sizeof</span>(<a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#a27d89e2a5f98ab524846b9bac59ebf44">deviceFFT_t</a>)*nlocal);</div>
<div class="line"><span class="lineno">  434</span> </div>
<div class="line"><span class="lineno">  435</span><span class="preprocessor">    #ifdef VerboseInitializer</span></div>
<div class="line"><span class="lineno">  436</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a> == 0)printf(<span class="stringliteral">&quot;%s      Allocated d_sx, d_sy, d_sz.\n&quot;</span>,indent);</div>
<div class="line"><span class="lineno">  437</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a> == 0)printf(<span class="stringliteral">&quot;%s   Calling get_delta_and_dotDelta...\n&quot;</span>,indent);</div>
<div class="line"><span class="lineno">  438</span><span class="preprocessor">    #endif</span></div>
<div class="line"><span class="lineno">  439</span> </div>
<div class="line"><span class="lineno">  440</span>    <span class="keywordtype">double</span> delta;</div>
<div class="line"><span class="lineno">  441</span>    <span class="keywordtype">double</span> dotDelta;</div>
<div class="line"><span class="lineno">  442</span>    <span class="keywordtype">double</span> this_a = (1/(z + 1)) - (deltaT/2.0f);</div>
<div class="line"><span class="lineno">  443</span>    <span class="keywordtype">double</span> velZ = (1.0f/this_a) - 1.0f;</div>
<div class="line"><span class="lineno">  444</span>    <a class="code hl_function" href="../../d1/dc2/ccamb_8c.html#ac0e00d8b9c96e56e190e4c04d30fb237">get_delta_and_dotDelta</a>(params_file, z,velZ,&amp;delta,&amp;dotDelta,calls+1);</div>
<div class="line"><span class="lineno">  445</span> </div>
<div class="line"><span class="lineno">  446</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a> == 0)printf(<span class="stringliteral">&quot;%s      Delta %g, dotDelta %g\n&quot;</span>,indent,delta,dotDelta);</div>
<div class="line"><span class="lineno">  447</span> </div>
<div class="line"><span class="lineno">  448</span><span class="preprocessor">    #ifdef VerboseInitializer</span></div>
<div class="line"><span class="lineno">  449</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a> == 0)printf(<span class="stringliteral">&quot;%s      Called get_delta_and_dotDelta.\n&quot;</span>,indent);</div>
<div class="line"><span class="lineno">  450</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a> == 0)printf(<span class="stringliteral">&quot;%s   Calling transformDensityField...\n&quot;</span>,indent);</div>
<div class="line"><span class="lineno">  451</span><span class="preprocessor">    #endif</span></div>
<div class="line"><span class="lineno">  452</span> </div>
<div class="line"><span class="lineno">  453</span>    <a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#aeb036429c3ef20a1b4d863bf03ff5648">InvokeGPUKernelParallel</a>(<a class="code hl_function" href="../../de/d3b/initializer_8cu.html#ac29241f3695227eb88a70b902a8b3cdb">transformDensityField</a>,numBlocks,blockSize,mem-&gt;<a class="code hl_variable" href="../../db/da8/classHACCGPM_1_1parallel_1_1MemoryManager.html#a7c0b83a42a12155d7e9c10919293c797">d_grid</a>,d_sx,d_sy,d_sz,delta,rl,1/(1+z),ng,nlocal,<a class="code hl_variable" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a>);</div>
<div class="line"><span class="lineno">  454</span> </div>
<div class="line"><span class="lineno">  455</span><span class="preprocessor">    #ifdef VerboseInitializer</span></div>
<div class="line"><span class="lineno">  456</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a> == 0)printf(<span class="stringliteral">&quot;%s      Called transformVelocityField.\n&quot;</span>,indent);</div>
<div class="line"><span class="lineno">  457</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a> == 0)printf(<span class="stringliteral">&quot;%s   Doing Backward FFTs...\n&quot;</span>,indent);</div>
<div class="line"><span class="lineno">  458</span><span class="preprocessor">    #endif</span></div>
<div class="line"><span class="lineno">  459</span> </div>
<div class="line"><span class="lineno">  460</span>    <a class="code hl_function" href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html#add12ee925b08f1eca77ec3d4c2b94aed">HACCGPM::parallel::backward_fft</a>(d_sx,ng,calls+1);</div>
<div class="line"><span class="lineno">  461</span>    <a class="code hl_function" href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html#add12ee925b08f1eca77ec3d4c2b94aed">HACCGPM::parallel::backward_fft</a>(d_sy,ng,calls+1);</div>
<div class="line"><span class="lineno">  462</span>    <a class="code hl_function" href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html#add12ee925b08f1eca77ec3d4c2b94aed">HACCGPM::parallel::backward_fft</a>(d_sz,ng,calls+1);</div>
<div class="line"><span class="lineno">  463</span> </div>
<div class="line"><span class="lineno">  464</span>    <span class="keywordtype">double</span> scale_by = 1.0f/((double)(ng*ng*ng));</div>
<div class="line"><span class="lineno">  465</span> </div>
<div class="line"><span class="lineno">  466</span>    <a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#aeb036429c3ef20a1b4d863bf03ff5648">InvokeGPUKernelParallel</a>(<a class="code hl_function" href="../../de/d3b/initializer_8cu.html#a0ff351b62d308a913e30708b2ce6952e">ScaleFFT</a>,numBlocks,blockSize,d_sx,scale_by);</div>
<div class="line"><span class="lineno">  467</span>    <a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#aeb036429c3ef20a1b4d863bf03ff5648">InvokeGPUKernelParallel</a>(<a class="code hl_function" href="../../de/d3b/initializer_8cu.html#a0ff351b62d308a913e30708b2ce6952e">ScaleFFT</a>,numBlocks,blockSize,d_sy,scale_by);</div>
<div class="line"><span class="lineno">  468</span>    <a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#aeb036429c3ef20a1b4d863bf03ff5648">InvokeGPUKernelParallel</a>(<a class="code hl_function" href="../../de/d3b/initializer_8cu.html#a0ff351b62d308a913e30708b2ce6952e">ScaleFFT</a>,numBlocks,blockSize,d_sz,scale_by);</div>
<div class="line"><span class="lineno">  469</span> </div>
<div class="line"><span class="lineno">  470</span><span class="preprocessor">    #ifdef VerboseInitializer</span></div>
<div class="line"><span class="lineno">  471</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a> == 0)printf(<span class="stringliteral">&quot;%s      Done Backward FFTs.\n&quot;</span>,indent);</div>
<div class="line"><span class="lineno">  472</span><span class="preprocessor">    #endif</span></div>
<div class="line"><span class="lineno">  473</span> </div>
<div class="line"><span class="lineno">  474</span>    <a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#aeb036429c3ef20a1b4d863bf03ff5648">InvokeGPUKernelParallel</a>(<a class="code hl_function" href="../../de/d3b/initializer_8cu.html#a2fe476c02dd57a3bf0adeed08604e935">placeParticles</a>,numBlocks,blockSize,mem-&gt;<a class="code hl_variable" href="../../db/da8/classHACCGPM_1_1parallel_1_1MemoryManager.html#a3626bf3ccd0b81b73f73d29316d2dff3">d_pos</a>,mem-&gt;<a class="code hl_variable" href="../../db/da8/classHACCGPM_1_1parallel_1_1MemoryManager.html#a1bf27684925da59bdf0bb461f126dc0d">d_vel</a>,d_sx,d_sy,d_sz,delta,dotDelta,rl,1/(1+z),deltaT,fscal,ng,local_grid_size[0],local_grid_size[1],local_grid_size[2], nlocal, <a class="code hl_variable" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a>);</div>
<div class="line"><span class="lineno">  475</span> </div>
<div class="line"><span class="lineno">  476</span><span class="preprocessor">    #ifdef VerboseInitializer</span></div>
<div class="line"><span class="lineno">  477</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a> == 0)printf(<span class="stringliteral">&quot;%s   Freeing d_sx, d_sy, d_sz...\n&quot;</span>,indent);</div>
<div class="line"><span class="lineno">  478</span><span class="preprocessor">    #endif</span></div>
<div class="line"><span class="lineno">  479</span> </div>
<div class="line"><span class="lineno">  480</span>    cudaFree(d_sx);</div>
<div class="line"><span class="lineno">  481</span>    cudaFree(d_sy);</div>
<div class="line"><span class="lineno">  482</span>    cudaFree(d_sz);</div>
<div class="line"><span class="lineno">  483</span> </div>
<div class="line"><span class="lineno">  484</span><span class="preprocessor">    #ifdef VerboseInitializer</span></div>
<div class="line"><span class="lineno">  485</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a> == 0)printf(<span class="stringliteral">&quot;%s      Freed d_sx, d_sy, d_sz.\n&quot;</span>,indent);</div>
<div class="line"><span class="lineno">  486</span><span class="preprocessor">    #endif</span></div>
<div class="line"><span class="lineno">  487</span> </div>
<div class="line"><span class="lineno">  488</span>}</div>
<div class="ttc" id="accamb_8c_html_ac0e00d8b9c96e56e190e4c04d30fb237"><div class="ttname"><a href="../../d1/dc2/ccamb_8c.html#ac0e00d8b9c96e56e190e4c04d30fb237">get_delta_and_dotDelta</a></div><div class="ttdeci">void get_delta_and_dotDelta(const char *params_file, double z, double z1, double *delta, double *dotDelta, int calls)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/dc2/ccamb_8c_source.html#l00332">ccamb.c:332</a></div></div>
<div class="ttc" id="aclassHACCGPM_1_1parallel_1_1MemoryManager_html_a1bf27684925da59bdf0bb461f126dc0d"><div class="ttname"><a href="../../db/da8/classHACCGPM_1_1parallel_1_1MemoryManager.html#a1bf27684925da59bdf0bb461f126dc0d">HACCGPM::parallel::MemoryManager::d_vel</a></div><div class="ttdeci">float4 * d_vel</div><div class="ttdef"><b>Definition</b> <a href="../../da/d0d/haccgpm_8hpp_source.html#l00126">haccgpm.hpp:126</a></div></div>
<div class="ttc" id="aclassHACCGPM_1_1parallel_1_1MemoryManager_html_a3626bf3ccd0b81b73f73d29316d2dff3"><div class="ttname"><a href="../../db/da8/classHACCGPM_1_1parallel_1_1MemoryManager.html#a3626bf3ccd0b81b73f73d29316d2dff3">HACCGPM::parallel::MemoryManager::d_pos</a></div><div class="ttdeci">float4 * d_pos</div><div class="ttdef"><b>Definition</b> <a href="../../da/d0d/haccgpm_8hpp_source.html#l00125">haccgpm.hpp:125</a></div></div>
<div class="ttc" id="aclassHACCGPM_1_1parallel_1_1MemoryManager_html_a7c0b83a42a12155d7e9c10919293c797"><div class="ttname"><a href="../../db/da8/classHACCGPM_1_1parallel_1_1MemoryManager.html#a7c0b83a42a12155d7e9c10919293c797">HACCGPM::parallel::MemoryManager::d_grid</a></div><div class="ttdeci">deviceFFT_t * d_grid</div><div class="ttdef"><b>Definition</b> <a href="../../da/d0d/haccgpm_8hpp_source.html#l00129">haccgpm.hpp:129</a></div></div>
<div class="ttc" id="ahaccgpm_8hpp_html_a27d89e2a5f98ab524846b9bac59ebf44"><div class="ttname"><a href="../../da/d0d/haccgpm_8hpp.html#a27d89e2a5f98ab524846b9bac59ebf44">deviceFFT_t</a></div><div class="ttdeci">#define deviceFFT_t</div><div class="ttdef"><b>Definition</b> <a href="../../da/d0d/haccgpm_8hpp_source.html#l00021">haccgpm.hpp:21</a></div></div>
<div class="ttc" id="ainitializer_8cu_html_a0ff351b62d308a913e30708b2ce6952e"><div class="ttname"><a href="../../de/d3b/initializer_8cu.html#a0ff351b62d308a913e30708b2ce6952e">ScaleFFT</a></div><div class="ttdeci">__global__ void ScaleFFT(deviceFFT_t *__restrict data, double scale)</div><div class="ttdef"><b>Definition</b> <a href="../../de/d3b/initializer_8cu_source.html#l00046">initializer.cu:46</a></div></div>
<div class="ttc" id="ainitializer_8cu_html_a2fe476c02dd57a3bf0adeed08604e935"><div class="ttname"><a href="../../de/d3b/initializer_8cu.html#a2fe476c02dd57a3bf0adeed08604e935">placeParticles</a></div><div class="ttdeci">__global__ void placeParticles(float4 *__restrict d_pos, float4 *__restrict d_vel, deviceFFT_t *__restrict outSx, deviceFFT_t *__restrict outSy, deviceFFT_t *__restrict outSz, double delta, double dotDelta, double rl, double a, double deltaT, double fscal, int ng)</div><div class="ttdef"><b>Definition</b> <a href="../../de/d3b/initializer_8cu_source.html#l00137">initializer.cu:137</a></div></div>
<div class="ttc" id="ainitializer_8cu_html_a8d1235c9dcec22662164f05aca0fe102"><div class="ttname"><a href="../../de/d3b/initializer_8cu.html#a8d1235c9dcec22662164f05aca0fe102">GenerateFourierAmplitudesParallel</a></div><div class="ttdeci">void GenerateFourierAmplitudesParallel(const char *params_file, deviceFFT_t *d_grid, int ng, double rl, double z, int seed, int blockSize, int world_rank, int world_size, int nlocal, int calls)</div><div class="ttdef"><b>Definition</b> <a href="../../de/d3b/initializer_8cu_source.html#l00344">initializer.cu:344</a></div></div>
<div class="ttc" id="ainitializer_8cu_html_ac29241f3695227eb88a70b902a8b3cdb"><div class="ttname"><a href="../../de/d3b/initializer_8cu.html#ac29241f3695227eb88a70b902a8b3cdb">transformDensityField</a></div><div class="ttdeci">__global__ void transformDensityField(const deviceFFT_t *__restrict oldGrid, deviceFFT_t *__restrict outSx, deviceFFT_t *__restrict outSy, deviceFFT_t *__restrict outSz, double delta, double rl, double a, int ng)</div><div class="ttdef"><b>Definition</b> <a href="../../de/d3b/initializer_8cu_source.html#l00059">initializer.cu:59</a></div></div>
<div class="ttc" id="anamespaceHACCGPM_1_1parallel_html_add12ee925b08f1eca77ec3d4c2b94aed"><div class="ttname"><a href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html#add12ee925b08f1eca77ec3d4c2b94aed">HACCGPM::parallel::backward_fft</a></div><div class="ttdeci">void backward_fft(deviceFFT_t *d_grid, int ng, int calls=0)</div><div class="ttdef"><b>Definition</b> <a href="../../d4/df7/swfftmanager_8cpp_source.html#l00075">swfftmanager.cpp:75</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d4/df7/swfftmanager_8cpp_source.html#l00075">backward_fft()</a>, <a class="el" href="../../da/d0d/haccgpm_8hpp_source.html#l00037">cudaCall</a>, <a class="el" href="../../da/d0d/haccgpm_8hpp_source.html#l00129">HACCGPM::parallel::MemoryManager::d_grid</a>, <a class="el" href="../../da/d0d/haccgpm_8hpp_source.html#l00125">HACCGPM::parallel::MemoryManager::d_pos</a>, <a class="el" href="../../da/d0d/haccgpm_8hpp_source.html#l00126">HACCGPM::parallel::MemoryManager::d_vel</a>, <a class="el" href="../../da/d0d/haccgpm_8hpp_source.html#l00021">deviceFFT_t</a>, <a class="el" href="../../de/d3b/initializer_8cu_source.html#l00344">GenerateFourierAmplitudesParallel()</a>, <a class="el" href="../../d1/dc2/ccamb_8c_source.html#l00332">get_delta_and_dotDelta()</a>, <a class="el" href="../../d1/dc2/ccamb_8c_source.html#l00009">getIndent</a>, <a class="el" href="../../da/d0d/haccgpm_8hpp_source.html#l00041">InvokeGPUKernelParallel</a>, <a class="el" href="../../de/d3b/initializer_8cu_source.html#l00137">placeParticles()</a>, <a class="el" href="../../de/d3b/initializer_8cu_source.html#l00046">ScaleFFT()</a>, <a class="el" href="../../de/d3b/initializer_8cu_source.html#l00059">transformDensityField()</a>, and <a class="el" href="../../d1/dc2/ccamb_8c_source.html#l00020">world_rank</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d15/driver_8cpp_source.html#l00123">parallel()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/d3f/namespaceHACCGPM_1_1parallel_af10a44b19c6bfe6e4edd7776b4a0df5c_cgraph.png" border="0" usemap="#ad1/d3f/namespaceHACCGPM_1_1parallel_af10a44b19c6bfe6e4edd7776b4a0df5c_cgraph" alt=""/></div>
<map name="ad1/d3f/namespaceHACCGPM_1_1parallel_af10a44b19c6bfe6e4edd7776b4a0df5c_cgraph" id="ad1/d3f/namespaceHACCGPM_1_1parallel_af10a44b19c6bfe6e4edd7776b4a0df5c_cgraph">
<area shape="rect" title=" " alt="" coords="5,215,175,255"/>
<area shape="rect" href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html#add12ee925b08f1eca77ec3d4c2b94aed" title=" " alt="" coords="239,19,387,59"/>
<area shape="poly" title=" " alt="" coords="111,213,277,67,281,71,115,217"/>
<area shape="rect" href="../../de/d3b/initializer_8cu.html#a8d1235c9dcec22662164f05aca0fe102" title=" " alt="" coords="223,133,403,173"/>
<area shape="poly" title=" " alt="" coords="141,213,222,182,242,175,243,180,224,187,143,218"/>
<area shape="rect" href="../../d1/dc2/ccamb_8c.html#ac0e00d8b9c96e56e190e4c04d30fb237" title=" " alt="" coords="233,197,392,223"/>
<area shape="poly" title=" " alt="" coords="175,223,219,218,220,223,175,228"/>
<area shape="rect" href="../../de/d3b/initializer_8cu.html#a2fe476c02dd57a3bf0adeed08604e935" title=" " alt="" coords="261,247,365,272"/>
<area shape="poly" title=" " alt="" coords="175,242,247,250,246,255,175,247"/>
<area shape="rect" href="../../de/d3b/initializer_8cu.html#a0ff351b62d308a913e30708b2ce6952e" title=" " alt="" coords="273,296,352,321"/>
<area shape="poly" title=" " alt="" coords="144,253,223,281,261,292,259,297,222,286,142,258"/>
<area shape="rect" href="../../de/d3b/initializer_8cu.html#ac29241f3695227eb88a70b902a8b3cdb" title=" " alt="" coords="237,345,388,371"/>
<area shape="poly" title=" " alt="" coords="113,254,162,293,224,332,240,339,238,343,221,336,159,298,110,258"/>
<area shape="rect" href="../../da/d0d/haccgpm_8hpp.html#a78588985bccaffcba4aa40467d7961d6" title=" " alt="" coords="655,5,739,31"/>
<area shape="poly" title=" " alt="" coords="386,21,450,11,529,8,607,11,641,12,641,18,607,17,529,14,451,17,387,26"/>
<area shape="rect" href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html#ab6fb9d3fbd0ac120db603cad0fe58b40" title=" " alt="" coords="455,26,603,66"/>
<area shape="poly" title=" " alt="" coords="346,130,449,76,464,69,466,74,452,80,349,135"/>
<area shape="rect" href="../../de/d3b/initializer_8cu.html#a3a6a489ebcb9da12e9b3f57b08ac6396" title=" " alt="" coords="453,91,604,116"/>
<area shape="poly" title=" " alt="" coords="400,130,459,116,460,122,401,135"/>
<area shape="rect" href="../../d1/dc2/ccamb_8c.html#aadc2b7f3bee3c7dd72f6f6b40f2f80b7" title=" " alt="" coords="474,140,583,165"/>
<area shape="poly" title=" " alt="" coords="403,150,460,150,460,155,403,155"/>
<area shape="rect" href="../../de/d3b/initializer_8cu.html#a174a7dfb28cda0d682d3532053a673af" title=" " alt="" coords="494,189,563,215"/>
<area shape="poly" title=" " alt="" coords="401,170,481,188,480,194,400,175"/>
<area shape="rect" href="../../de/d3b/initializer_8cu.html#a5886c0bfc1e8bc6577b1f33c8e24cd5b" title=" " alt="" coords="469,239,589,264"/>
<area shape="poly" title=" " alt="" coords="380,170,404,182,428,204,438,214,452,224,468,231,465,236,449,228,434,218,425,207,401,187,377,175"/>
<area shape="poly" title=" " alt="" coords="602,31,641,25,642,30,603,36"/>
<area shape="rect" href="../../d5/d07/namespaceHACCGPM_1_1serial.html#ad9fb99027bd0e8c4666c28a5b85d419e" title=" " alt="" coords="451,289,607,329"/>
<area shape="poly" title=" " alt="" coords="366,269,438,285,437,290,364,274"/>
<area shape="poly" title=" " alt="" coords="368,343,436,327,437,332,369,348"/>
<area shape="rect" href="../../d5/d07/namespaceHACCGPM_1_1serial.html#adebf563a2ff1ace956181e3a26ea6cb2" title=" " alt="" coords="451,353,607,393"/>
<area shape="poly" title=" " alt="" coords="388,360,437,364,437,369,388,366"/>
</map>
</div>

</div>
</div>
<a id="a2b1a8b06a15d4701087629fbebff3654" name="a2b1a8b06a15d4701087629fbebff3654"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b1a8b06a15d4701087629fbebff3654">&#9670;&#160;</a></span>get_global_index()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__device__ __forceinline__ int3 HACCGPM::parallel::get_global_index </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ng</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nlocal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>world_rank</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d0d/haccgpm_8hpp_source.html#l00146">146</a> of file <a class="el" href="../../da/d0d/haccgpm_8hpp_source.html">haccgpm.hpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  146</span>                                                                                                     {</div>
<div class="line"><span class="lineno">  147</span>            int3 out;</div>
<div class="line"><span class="lineno">  148</span>            idx += nlocal * <a class="code hl_variable" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a>;</div>
<div class="line"><span class="lineno">  149</span>            out.x = idx/(ng*ng);</div>
<div class="line"><span class="lineno">  150</span>            out.y = (idx - (out.x*ng*ng))/ng;</div>
<div class="line"><span class="lineno">  151</span>            out.z = (idx - (out.x*ng*ng)) - out.y*ng;</div>
<div class="line"><span class="lineno">  152</span>            <span class="keywordflow">return</span> out;</div>
<div class="line"><span class="lineno">  153</span>        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d1/dc2/ccamb_8c_source.html#l00020">world_rank</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d3b/initializer_8cu_source.html#l00098">transformDensityField()</a>.</p>

</div>
</div>
<a id="a9cc116aa60cc101955046739bcfcf3bf" name="a9cc116aa60cc101955046739bcfcf3bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9cc116aa60cc101955046739bcfcf3bf">&#9670;&#160;</a></span>get_kmodes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__device__ __forceinline__ float3 HACCGPM::parallel::get_kmodes </td>
          <td>(</td>
          <td class="paramtype">int3&#160;</td>
          <td class="paramname"><em>idx3d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ng</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>d</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d0d/haccgpm_8hpp_source.html#l00155">155</a> of file <a class="el" href="../../da/d0d/haccgpm_8hpp_source.html">haccgpm.hpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  155</span>                                                                                  {</div>
<div class="line"><span class="lineno">  156</span>            <span class="keywordtype">float</span> l = idx3d.x;</div>
<div class="line"><span class="lineno">  157</span>            <span class="keywordflow">if</span> (idx3d.x &gt; ((ng/2)-1)){</div>
<div class="line"><span class="lineno">  158</span>                l = -(ng - idx3d.x);</div>
<div class="line"><span class="lineno">  159</span>            }</div>
<div class="line"><span class="lineno">  160</span>            l *= d;</div>
<div class="line"><span class="lineno">  161</span> </div>
<div class="line"><span class="lineno">  162</span>            <span class="keywordtype">float</span> m = idx3d.y;</div>
<div class="line"><span class="lineno">  163</span>            <span class="keywordflow">if</span> (idx3d.y &gt; ((ng/2)-1)){</div>
<div class="line"><span class="lineno">  164</span>                m = -(ng - idx3d.y);</div>
<div class="line"><span class="lineno">  165</span>            }</div>
<div class="line"><span class="lineno">  166</span>            m *= d;</div>
<div class="line"><span class="lineno">  167</span> </div>
<div class="line"><span class="lineno">  168</span>            <span class="keywordtype">float</span> n = idx3d.z;</div>
<div class="line"><span class="lineno">  169</span>            <span class="keywordflow">if</span> (idx3d.z &gt; ((ng/2)-1)){</div>
<div class="line"><span class="lineno">  170</span>                n = -(ng - idx3d.z);</div>
<div class="line"><span class="lineno">  171</span>            }</div>
<div class="line"><span class="lineno">  172</span>            n *= d;</div>
<div class="line"><span class="lineno">  173</span>            <span class="keywordflow">return</span> make_float3(l,m,n);</div>
<div class="line"><span class="lineno">  174</span>        }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../de/d3b/initializer_8cu_source.html#l00098">transformDensityField()</a>.</p>

</div>
</div>
<a id="abcddbac52c4da4a8a55b5b9dbb3940ce" name="abcddbac52c4da4a8a55b5b9dbb3940ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abcddbac52c4da4a8a55b5b9dbb3940ce">&#9670;&#160;</a></span>get_local_index()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__device__ __forceinline__ int3 HACCGPM::parallel::get_local_index </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ny</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d0d/haccgpm_8hpp_source.html#l00138">138</a> of file <a class="el" href="../../da/d0d/haccgpm_8hpp_source.html">haccgpm.hpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  138</span>                                                                                        {</div>
<div class="line"><span class="lineno">  139</span>            int3 out;</div>
<div class="line"><span class="lineno">  140</span>            out.x = idx/(ny*nz);</div>
<div class="line"><span class="lineno">  141</span>            out.y = (idx - (out.x*ny*nz))/nz;</div>
<div class="line"><span class="lineno">  142</span>            out.z = (idx - (out.x*ny*nz)) - out.y*nz;</div>
<div class="line"><span class="lineno">  143</span>            <span class="keywordflow">return</span> out;</div>
<div class="line"><span class="lineno">  144</span>        }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../de/d3b/initializer_8cu_source.html#l00165">placeParticles()</a>.</p>

</div>
</div>
<a id="ac66d632437a71d40e49ac15c25b5a26f" name="ac66d632437a71d40e49ac15c25b5a26f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac66d632437a71d40e49ac15c25b5a26f">&#9670;&#160;</a></span>gridExchange()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HACCGPM::parallel::gridExchange </td>
          <td>(</td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>d_extragrid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int3&#160;</td>
          <td class="paramname"><em>local_grid_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>world_rank</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>world_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>blockSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>calls</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/dec/transfers_8cpp_source.html#l00167">167</a> of file <a class="el" href="../../d9/dec/transfers_8cpp_source.html">transfers.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  167</span>                                                                                                                                    {</div>
<div class="line"><span class="lineno">  168</span>    <a class="code hl_define" href="../../d1/dc2/ccamb_8c.html#aede6a850e442b96dd236d1bed8bf19e5">getIndent</a>(calls);</div>
<div class="line"><span class="lineno">  169</span><span class="preprocessor">    #ifdef VerboseTransfer</span></div>
<div class="line"><span class="lineno">  170</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a> == 0)printf(<span class="stringliteral">&quot;%sgridExchange was called\n&quot;</span>,indent);</div>
<div class="line"><span class="lineno">  171</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a> == 0)printf(<span class="stringliteral">&quot;%s   Allocating h_transfer\n&quot;</span>,indent);</div>
<div class="line"><span class="lineno">  172</span><span class="preprocessor">    #endif</span></div>
<div class="line"><span class="lineno">  173</span>    <span class="keywordtype">int</span> n_extra = (local_grid_size.x+1)*(local_grid_size.y+1)*(local_grid_size.z+1) - local_grid_size.x*local_grid_size.y*local_grid_size.z;</div>
<div class="line"><span class="lineno">  174</span>    <span class="keywordtype">float</span>* h_transfer = (<span class="keywordtype">float</span>*)malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">float</span>)*n_extra);</div>
<div class="line"><span class="lineno">  175</span><span class="preprocessor">    #ifdef VerboseTransfer</span></div>
<div class="line"><span class="lineno">  176</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a> == 0)printf(<span class="stringliteral">&quot;%s      Allocated h_transfer\n&quot;</span>,indent);</div>
<div class="line"><span class="lineno">  177</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a> == 0)printf(<span class="stringliteral">&quot;%s   Calling loadGridBuffers\n&quot;</span>,indent);</div>
<div class="line"><span class="lineno">  178</span><span class="preprocessor">    #endif</span></div>
<div class="line"><span class="lineno">  179</span>    <a class="code hl_function" href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html#a31a4b3e867d91495908cb284b049c610">HACCGPM::parallel::loadGridBuffers</a>(d_extragrid, h_transfer,local_grid_size, blockSize, <a class="code hl_variable" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a>,calls+1);</div>
<div class="line"><span class="lineno">  180</span><span class="preprocessor">    #ifdef VerboseTransfer</span></div>
<div class="line"><span class="lineno">  181</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a> == 0)printf(<span class="stringliteral">&quot;%s      Called loadGridBuffers\n&quot;</span>,indent);</div>
<div class="line"><span class="lineno">  182</span><span class="preprocessor">    #endif</span></div>
<div class="line"><span class="lineno">  183</span> </div>
<div class="line"><span class="lineno">  184</span>    </div>
<div class="line"><span class="lineno">  185</span> </div>
<div class="line"><span class="lineno">  186</span><span class="preprocessor">    #ifdef VerboseTransfer</span></div>
<div class="line"><span class="lineno">  187</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a> == 0)printf(<span class="stringliteral">&quot;%s   Freeing h_transfers\n&quot;</span>,indent);</div>
<div class="line"><span class="lineno">  188</span><span class="preprocessor">    #endif</span></div>
<div class="line"><span class="lineno">  189</span>    free(h_transfer);</div>
<div class="line"><span class="lineno">  190</span><span class="preprocessor">    #ifdef VerboseTransfer</span></div>
<div class="line"><span class="lineno">  191</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a> == 0)printf(<span class="stringliteral">&quot;%s      Freed h_transfers\n&quot;</span>,indent);</div>
<div class="line"><span class="lineno">  192</span><span class="preprocessor">    #endif</span></div>
<div class="line"><span class="lineno">  193</span>}</div>
<div class="ttc" id="anamespaceHACCGPM_1_1parallel_html_a31a4b3e867d91495908cb284b049c610"><div class="ttname"><a href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html#a31a4b3e867d91495908cb284b049c610">HACCGPM::parallel::loadGridBuffers</a></div><div class="ttdeci">CPUTimer_t loadGridBuffers(float *d_extragrid, float *h_transfer, int3 local_grid_size, int blockSize, int world_rank, int calls=0)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/dc6/particleswapkernels_8cu_source.html#l00189">particleswapkernels.cu:189</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d1/dc2/ccamb_8c_source.html#l00009">getIndent</a>, <a class="el" href="../../d1/dc6/particleswapkernels_8cu_source.html#l00189">loadGridBuffers()</a>, and <a class="el" href="../../d1/dc2/ccamb_8c_source.html#l00020">world_rank</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/d3f/namespaceHACCGPM_1_1parallel_ac66d632437a71d40e49ac15c25b5a26f_cgraph.png" border="0" usemap="#ad1/d3f/namespaceHACCGPM_1_1parallel_ac66d632437a71d40e49ac15c25b5a26f_cgraph" alt=""/></div>
<map name="ad1/d3f/namespaceHACCGPM_1_1parallel_ac66d632437a71d40e49ac15c25b5a26f_cgraph" id="ad1/d3f/namespaceHACCGPM_1_1parallel_ac66d632437a71d40e49ac15c25b5a26f_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,153,45"/>
<area shape="rect" href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html#a31a4b3e867d91495908cb284b049c610" title=" " alt="" coords="201,5,349,45"/>
<area shape="poly" title=" " alt="" coords="153,23,188,23,188,28,153,28"/>
<area shape="rect" href="../../d1/dc6/particleswapkernels_8cu.html#aaf2d833243661c8b0d95bb5091d3382e" title=" " alt="" coords="397,13,547,38"/>
<area shape="poly" title=" " alt="" coords="350,23,383,23,383,28,350,28"/>
</map>
</div>

</div>
</div>
<a id="acac1f2241bc62f1bf39dce1c0d2f637e" name="acac1f2241bc62f1bf39dce1c0d2f637e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acac1f2241bc62f1bf39dce1c0d2f637e">&#9670;&#160;</a></span>init_swfft()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HACCGPM::parallel::init_swfft </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/de1/structHACCGPM_1_1Params.html">HACCGPM::Params</a> &amp;&#160;</td>
          <td class="paramname"><em>params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/df7/swfftmanager_8cpp_source.html#l00053">53</a> of file <a class="el" href="../../d4/df7/swfftmanager_8cpp_source.html">swfftmanager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   53</span>                                                     {</div>
<div class="line"><span class="lineno">   54</span>    <span class="comment">//FFTManager tmp(params);</span></div>
<div class="line"><span class="lineno">   55</span>    <a class="code hl_variable" href="../../d4/df7/swfftmanager_8cpp.html#a5b209e45ba80998575b1316f55e5c9e8">ffts</a> = <span class="keyword">new</span> <a class="code hl_class" href="../../d0/d55/classFFTManager.html">FFTManager</a>(params);</div>
<div class="line"><span class="lineno">   56</span>}</div>
<div class="ttc" id="aclassFFTManager_html"><div class="ttname"><a href="../../d0/d55/classFFTManager.html">FFTManager</a></div><div class="ttdef"><b>Definition</b> <a href="../../d4/df7/swfftmanager_8cpp_source.html#l00016">swfftmanager.cpp:16</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d4/df7/swfftmanager_8cpp_source.html#l00051">ffts</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d15/driver_8cpp_source.html#l00123">parallel()</a>.</p>

</div>
</div>
<a id="a732c4638e4b8fc8959263d43cc8cccdf" name="a732c4638e4b8fc8959263d43cc8cccdf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a732c4638e4b8fc8959263d43cc8cccdf">&#9670;&#160;</a></span>initLoadIntoBuffers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/d0d/haccgpm_8hpp.html#aa790b6767cf9152c32b179d29c46e3ef">CPUTimer_t</a> HACCGPM::parallel::initLoadIntoBuffers </td>
          <td>(</td>
          <td class="paramtype">float4 **&#160;</td>
          <td class="paramname"><em>swap_pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float4 **&#160;</td>
          <td class="paramname"><em>swap_vel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>n_swaps</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float4 *&#160;</td>
          <td class="paramname"><em>d_pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float4 *&#160;</td>
          <td class="paramname"><em>d_vel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nlocal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int3&#160;</td>
          <td class="paramname"><em>local_grid_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n_particles</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>blockSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>world_rank</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>calls</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc6/particleswapkernels_8cu_source.html#l00232">232</a> of file <a class="el" href="../../d1/dc6/particleswapkernels_8cu_source.html">particleswapkernels.cu</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  232</span>                                                                                                                                                                                                                           {</div>
<div class="line"><span class="lineno">  233</span>    <span class="keywordtype">int</span> numBlocks = (n_particles + blockSize - 1) / blockSize;</div>
<div class="line"><span class="lineno">  234</span> </div>
<div class="line"><span class="lineno">  235</span>    <a class="code hl_define" href="../../d1/dc2/ccamb_8c.html#aede6a850e442b96dd236d1bed8bf19e5">getIndent</a>(calls);</div>
<div class="line"><span class="lineno">  236</span> </div>
<div class="line"><span class="lineno">  237</span><span class="preprocessor">    #ifdef VerboseSwap</span></div>
<div class="line"><span class="lineno">  238</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a> == 0)printf(<span class="stringliteral">&quot;%sinitLoadIntoBuffers was called with\n%s   blockSize %d\n%s   numBlocks %d\n&quot;</span>,indent,indent,blockSize,indent,numBlocks);</div>
<div class="line"><span class="lineno">  239</span><span class="preprocessor">    #endif</span></div>
<div class="line"><span class="lineno">  240</span> </div>
<div class="line"><span class="lineno">  241</span>    <a class="code hl_typedef" href="../../da/d0d/haccgpm_8hpp.html#aa790b6767cf9152c32b179d29c46e3ef">CPUTimer_t</a> start = <a class="code hl_function" href="../../da/d0d/haccgpm_8hpp.html#a78588985bccaffcba4aa40467d7961d6">CPUTimer</a>();</div>
<div class="line"><span class="lineno">  242</span>    <a class="code hl_typedef" href="../../da/d0d/haccgpm_8hpp.html#aa790b6767cf9152c32b179d29c46e3ef">CPUTimer_t</a> gpu_time = 0;</div>
<div class="line"><span class="lineno">  243</span> </div>
<div class="line"><span class="lineno">  244</span>    <span class="keywordtype">int</span>* d_ns; <a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#a28fb452217abf040d6df7890f94a54b9">cudaCall</a>(cudaMalloc,&amp;d_ns,<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>)*27);</div>
<div class="line"><span class="lineno">  245</span>    <a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#a28fb452217abf040d6df7890f94a54b9">cudaCall</a>(cudaMemset,d_ns,0,<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>)*27);</div>
<div class="line"><span class="lineno">  246</span>    <span class="keywordtype">int</span>* h_ns = (<span class="keywordtype">int</span>*)malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>) * 27);</div>
<div class="line"><span class="lineno">  247</span>    gpu_time += <a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#aeb036429c3ef20a1b4d863bf03ff5648">InvokeGPUKernelParallel</a>(<a class="code hl_function" href="../../d1/dc6/particleswapkernels_8cu.html#a1438ea4370678803976db719c911095b">init_count_buffer</a>,numBlocks,blockSize,d_ns,d_pos,n_particles,local_grid_size);</div>
<div class="line"><span class="lineno">  248</span>    <a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#a28fb452217abf040d6df7890f94a54b9">cudaCall</a>(cudaMemcpy, h_ns, d_ns, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>)*27, cudaMemcpyDeviceToHost);</div>
<div class="line"><span class="lineno">  249</span>    <span class="keywordtype">int</span> tmp_size = 0;</div>
<div class="line"><span class="lineno">  250</span>    <span class="keywordtype">int</span>* h_starts = (<span class="keywordtype">int</span>*)malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>) * 27);</div>
<div class="line"><span class="lineno">  251</span>    <span class="keywordtype">int</span>* d_starts; <a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#a28fb452217abf040d6df7890f94a54b9">cudaCall</a>(cudaMalloc,&amp;d_starts,<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>)*27);</div>
<div class="line"><span class="lineno">  252</span>    h_starts[0] = 0;</div>
<div class="line"><span class="lineno">  253</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 27; i++){</div>
<div class="line"><span class="lineno">  254</span>        <span class="keywordflow">if</span> (i == 13)<span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  255</span>        tmp_size += h_ns[i];</div>
<div class="line"><span class="lineno">  256</span>        h_starts[i] = 0;</div>
<div class="line"><span class="lineno">  257</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; i; j++){</div>
<div class="line"><span class="lineno">  258</span>            <span class="keywordflow">if</span> (j == 13)<span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  259</span>            h_starts[i] += h_ns[j];</div>
<div class="line"><span class="lineno">  260</span>        }</div>
<div class="line"><span class="lineno">  261</span>    }</div>
<div class="line"><span class="lineno">  262</span> </div>
<div class="line"><span class="lineno">  263</span>    <a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#a28fb452217abf040d6df7890f94a54b9">cudaCall</a>(cudaMemcpy, d_starts, h_starts, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>)*27, cudaMemcpyHostToDevice);</div>
<div class="line"><span class="lineno">  264</span>    float4* d_pos_swap; <a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#a28fb452217abf040d6df7890f94a54b9">cudaCall</a>(cudaMalloc,&amp;d_pos_swap,<span class="keyword">sizeof</span>(float4)*tmp_size);</div>
<div class="line"><span class="lineno">  265</span>    float4* d_vel_swap; <a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#a28fb452217abf040d6df7890f94a54b9">cudaCall</a>(cudaMalloc,&amp;d_vel_swap,<span class="keyword">sizeof</span>(float4)*tmp_size);</div>
<div class="line"><span class="lineno">  266</span>    float4* d_tmppos; <a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#a28fb452217abf040d6df7890f94a54b9">cudaCall</a>(cudaMalloc,&amp;d_tmppos,<span class="keyword">sizeof</span>(float4)*n_particles);</div>
<div class="line"><span class="lineno">  267</span>    float4* d_tmpvel; <a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#a28fb452217abf040d6df7890f94a54b9">cudaCall</a>(cudaMalloc,&amp;d_tmpvel,<span class="keyword">sizeof</span>(float4)*n_particles);</div>
<div class="line"><span class="lineno">  268</span>    gpu_time += <a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#aeb036429c3ef20a1b4d863bf03ff5648">InvokeGPUKernelParallel</a>(<a class="code hl_function" href="../../d1/dc6/particleswapkernels_8cu.html#a5ace1b44eb57b3ce75b5c54575963da5">copy</a>,numBlocks,blockSize,d_tmppos,d_pos,d_tmpvel,d_vel,n_particles);</div>
<div class="line"><span class="lineno">  269</span>    gpu_time += <a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#aeb036429c3ef20a1b4d863bf03ff5648">InvokeGPUKernelParallel</a>(<a class="code hl_function" href="../../d1/dc6/particleswapkernels_8cu.html#abec6dfb3c242f73e827f5b91bde54edf">swap_set_invalid</a>,numBlocks,blockSize,d_pos,n_particles);</div>
<div class="line"><span class="lineno">  270</span> </div>
<div class="line"><span class="lineno">  271</span>    <a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#a28fb452217abf040d6df7890f94a54b9">cudaCall</a>(cudaMemset,d_ns,0,<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>)*27);</div>
<div class="line"><span class="lineno">  272</span>    gpu_time += <a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#aeb036429c3ef20a1b4d863bf03ff5648">InvokeGPUKernelParallel</a>(<a class="code hl_function" href="../../d1/dc6/particleswapkernels_8cu.html#a97414e10cc908d8a0a9a2538300df2d6">init_load_buffer</a>,numBlocks,blockSize,d_pos,d_vel,d_pos_swap,d_vel_swap,d_ns,d_starts,d_tmppos,d_tmpvel,local_grid_size,n_particles,<a class="code hl_variable" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a>);</div>
<div class="line"><span class="lineno">  273</span> </div>
<div class="line"><span class="lineno">  274</span>    float4* h_pos_swap = (float4*)GC_MALLOC(<span class="keyword">sizeof</span>(float4)*tmp_size);</div>
<div class="line"><span class="lineno">  275</span>    float4* h_vel_swap = (float4*)GC_MALLOC(<span class="keyword">sizeof</span>(float4)*tmp_size);</div>
<div class="line"><span class="lineno">  276</span>    <a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#a28fb452217abf040d6df7890f94a54b9">cudaCall</a>(cudaMemcpy, h_pos_swap, d_pos_swap, <span class="keyword">sizeof</span>(float4)*tmp_size, cudaMemcpyDeviceToHost);</div>
<div class="line"><span class="lineno">  277</span>    <a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#a28fb452217abf040d6df7890f94a54b9">cudaCall</a>(cudaMemcpy, h_vel_swap, d_vel_swap, <span class="keyword">sizeof</span>(float4)*tmp_size, cudaMemcpyDeviceToHost);</div>
<div class="line"><span class="lineno">  278</span> </div>
<div class="line"><span class="lineno">  279</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 27; i++){</div>
<div class="line"><span class="lineno">  280</span>        n_swaps[i] = h_ns[i];</div>
<div class="line"><span class="lineno">  281</span>        swap_pos[i] = &amp;h_pos_swap[h_starts[i]];</div>
<div class="line"><span class="lineno">  282</span>        swap_vel[i] = &amp;h_vel_swap[h_starts[i]];</div>
<div class="line"><span class="lineno">  283</span>    }</div>
<div class="line"><span class="lineno">  284</span> </div>
<div class="line"><span class="lineno">  285</span>    <a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#a28fb452217abf040d6df7890f94a54b9">cudaCall</a>(cudaFree,d_pos_swap);</div>
<div class="line"><span class="lineno">  286</span>    <a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#a28fb452217abf040d6df7890f94a54b9">cudaCall</a>(cudaFree,d_vel_swap);</div>
<div class="line"><span class="lineno">  287</span>    <a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#a28fb452217abf040d6df7890f94a54b9">cudaCall</a>(cudaFree,d_tmppos);</div>
<div class="line"><span class="lineno">  288</span>    <a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#a28fb452217abf040d6df7890f94a54b9">cudaCall</a>(cudaFree,d_tmpvel);</div>
<div class="line"><span class="lineno">  289</span>    <a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#a28fb452217abf040d6df7890f94a54b9">cudaCall</a>(cudaFree,d_ns);</div>
<div class="line"><span class="lineno">  290</span>    free(h_ns);</div>
<div class="line"><span class="lineno">  291</span>    free(h_starts);</div>
<div class="line"><span class="lineno">  292</span> </div>
<div class="line"><span class="lineno">  293</span>    <a class="code hl_typedef" href="../../da/d0d/haccgpm_8hpp.html#aa790b6767cf9152c32b179d29c46e3ef">CPUTimer_t</a> end = <a class="code hl_function" href="../../da/d0d/haccgpm_8hpp.html#a78588985bccaffcba4aa40467d7961d6">CPUTimer</a>();</div>
<div class="line"><span class="lineno">  294</span>    <a class="code hl_typedef" href="../../da/d0d/haccgpm_8hpp.html#aa790b6767cf9152c32b179d29c46e3ef">CPUTimer_t</a> total_time = end-start;</div>
<div class="line"><span class="lineno">  295</span> </div>
<div class="line"><span class="lineno">  296</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a> == 0)printf(<span class="stringliteral">&quot;%s   initLoadIntoBuffers took %llu us\n&quot;</span>,indent,total_time);</div>
<div class="line"><span class="lineno">  297</span>    <span class="keywordflow">return</span> gpu_time;</div>
<div class="line"><span class="lineno">  298</span>}</div>
<div class="ttc" id="aparticleswapkernels_8cu_html_a1438ea4370678803976db719c911095b"><div class="ttname"><a href="../../d1/dc6/particleswapkernels_8cu.html#a1438ea4370678803976db719c911095b">init_count_buffer</a></div><div class="ttdeci">__global__ void init_count_buffer(int *ns, const float4 *__restrict d_pos, int n_particles, int3 local_grid_size)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/dc6/particleswapkernels_8cu_source.html#l00023">particleswapkernels.cu:23</a></div></div>
<div class="ttc" id="aparticleswapkernels_8cu_html_a5ace1b44eb57b3ce75b5c54575963da5"><div class="ttname"><a href="../../d1/dc6/particleswapkernels_8cu.html#a5ace1b44eb57b3ce75b5c54575963da5">copy</a></div><div class="ttdeci">__global__ void copy(float4 *__restrict dest1, const float4 *__restrict source1, float4 *__restrict dest2, const float4 *__restrict source2, int n)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/dc6/particleswapkernels_8cu_source.html#l00014">particleswapkernels.cu:14</a></div></div>
<div class="ttc" id="aparticleswapkernels_8cu_html_a97414e10cc908d8a0a9a2538300df2d6"><div class="ttname"><a href="../../d1/dc6/particleswapkernels_8cu.html#a97414e10cc908d8a0a9a2538300df2d6">init_load_buffer</a></div><div class="ttdeci">__global__ void init_load_buffer(float4 *__restrict d_pos, float4 *__restrict d_vel, float4 *__restrict d_pos_swap, float4 *__restrict d_vel_swap, int *count, int *starts, const float4 *__restrict d_tmppos, const float4 *__restrict d_tmpvel, int3 local_grid_size, int n_particles, int world_rank)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/dc6/particleswapkernels_8cu_source.html#l00046">particleswapkernels.cu:46</a></div></div>
<div class="ttc" id="aparticleswapkernels_8cu_html_abec6dfb3c242f73e827f5b91bde54edf"><div class="ttname"><a href="../../d1/dc6/particleswapkernels_8cu.html#abec6dfb3c242f73e827f5b91bde54edf">swap_set_invalid</a></div><div class="ttdeci">__global__ void swap_set_invalid(float4 *__restrict d_pos, int mem_frac)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/dc6/particleswapkernels_8cu_source.html#l00008">particleswapkernels.cu:8</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d1/dc6/particleswapkernels_8cu_source.html#l00014">copy()</a>, <a class="el" href="../../da/d0d/haccgpm_8hpp_source.html#l00014">CPUTimer()</a>, <a class="el" href="../../da/d0d/haccgpm_8hpp_source.html#l00037">cudaCall</a>, <a class="el" href="../../d1/dc2/ccamb_8c_source.html#l00009">getIndent</a>, <a class="el" href="../../d1/dc6/particleswapkernels_8cu_source.html#l00023">init_count_buffer()</a>, <a class="el" href="../../d1/dc6/particleswapkernels_8cu_source.html#l00046">init_load_buffer()</a>, <a class="el" href="../../da/d0d/haccgpm_8hpp_source.html#l00041">InvokeGPUKernelParallel</a>, <a class="el" href="../../d1/dc6/particleswapkernels_8cu_source.html#l00008">swap_set_invalid()</a>, and <a class="el" href="../../d1/dc2/ccamb_8c_source.html#l00020">world_rank</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/dec/transfers_8cpp_source.html#l00195">initTransferParticles()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/d3f/namespaceHACCGPM_1_1parallel_a732c4638e4b8fc8959263d43cc8cccdf_cgraph.png" border="0" usemap="#ad1/d3f/namespaceHACCGPM_1_1parallel_a732c4638e4b8fc8959263d43cc8cccdf_cgraph" alt=""/></div>
<map name="ad1/d3f/namespaceHACCGPM_1_1parallel_a732c4638e4b8fc8959263d43cc8cccdf_cgraph" id="ad1/d3f/namespaceHACCGPM_1_1parallel_a732c4638e4b8fc8959263d43cc8cccdf_cgraph">
<area shape="rect" title=" " alt="" coords="5,97,153,137"/>
<area shape="rect" href="../../d1/dc6/particleswapkernels_8cu.html#a5ace1b44eb57b3ce75b5c54575963da5" title=" " alt="" coords="237,5,288,31"/>
<area shape="poly" title=" " alt="" coords="108,94,200,40,223,29,226,34,203,44,110,99"/>
<area shape="rect" href="../../da/d0d/haccgpm_8hpp.html#a78588985bccaffcba4aa40467d7961d6" title=" " alt="" coords="221,55,305,80"/>
<area shape="poly" title=" " alt="" coords="153,94,207,80,208,85,154,99"/>
<area shape="rect" href="../../d1/dc6/particleswapkernels_8cu.html#a1438ea4370678803976db719c911095b" title=" " alt="" coords="203,104,322,129"/>
<area shape="poly" title=" " alt="" coords="153,114,189,114,189,119,153,119"/>
<area shape="rect" href="../../d1/dc6/particleswapkernels_8cu.html#a97414e10cc908d8a0a9a2538300df2d6" title=" " alt="" coords="207,153,318,179"/>
<area shape="poly" title=" " alt="" coords="154,134,203,147,201,152,153,139"/>
<area shape="rect" href="../../d1/dc6/particleswapkernels_8cu.html#abec6dfb3c242f73e827f5b91bde54edf" title=" " alt="" coords="201,203,324,228"/>
<area shape="poly" title=" " alt="" coords="112,135,203,188,218,195,215,200,200,192,109,139"/>
</map>
</div>

</div>
</div>
<a id="ab67a1d4d424d75f9fd6046323ae44ec1" name="ab67a1d4d424d75f9fd6046323ae44ec1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab67a1d4d424d75f9fd6046323ae44ec1">&#9670;&#160;</a></span>initTransferParticles()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HACCGPM::parallel::initTransferParticles </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/de1/structHACCGPM_1_1Params.html">HACCGPM::Params</a> &amp;&#160;</td>
          <td class="paramname"><em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/da8/classHACCGPM_1_1parallel_1_1MemoryManager.html">HACCGPM::parallel::MemoryManager</a> &amp;&#160;</td>
          <td class="paramname"><em>mem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>calls</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/dec/transfers_8cpp_source.html#l00195">195</a> of file <a class="el" href="../../d9/dec/transfers_8cpp_source.html">transfers.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  195</span>                                                                                                             {</div>
<div class="line"><span class="lineno">  196</span> </div>
<div class="line"><span class="lineno">  197</span>    <a class="code hl_define" href="../../d1/dc2/ccamb_8c.html#aede6a850e442b96dd236d1bed8bf19e5">getIndent</a>(calls);</div>
<div class="line"><span class="lineno">  198</span> </div>
<div class="line"><span class="lineno">  199</span>    <a class="code hl_typedef" href="../../da/d0d/haccgpm_8hpp.html#aa790b6767cf9152c32b179d29c46e3ef">CPUTimer_t</a> start = <a class="code hl_function" href="../../da/d0d/haccgpm_8hpp.html#a78588985bccaffcba4aa40467d7961d6">CPUTimer</a>();</div>
<div class="line"><span class="lineno">  200</span> </div>
<div class="line"><span class="lineno">  201</span>    <span class="keywordtype">int</span> n_particles = params.<a class="code hl_variable" href="../../d5/de1/structHACCGPM_1_1Params.html#a8aa635cdca8d48b92f7a9a7d4c1e5f83">frac</a> * params.<a class="code hl_variable" href="../../d5/de1/structHACCGPM_1_1Params.html#a58f805768e0a0e28e25a3acc63fea57b">nlocal</a>;</div>
<div class="line"><span class="lineno">  202</span>    int3 local_grid_size = make_int3(params.<a class="code hl_variable" href="../../d5/de1/structHACCGPM_1_1Params.html#a36eb38d8a633ba0f7d968c99b42bac83">local_grid_size</a>[0],params.<a class="code hl_variable" href="../../d5/de1/structHACCGPM_1_1Params.html#a36eb38d8a633ba0f7d968c99b42bac83">local_grid_size</a>[1],params.<a class="code hl_variable" href="../../d5/de1/structHACCGPM_1_1Params.html#a36eb38d8a633ba0f7d968c99b42bac83">local_grid_size</a>[2]);</div>
<div class="line"><span class="lineno">  203</span>    int3 global_grid_size = make_int3(params.<a class="code hl_variable" href="../../d5/de1/structHACCGPM_1_1Params.html#a9a23dda8505b9d130900a65f487ef008">grid_dims</a>[0],params.<a class="code hl_variable" href="../../d5/de1/structHACCGPM_1_1Params.html#a9a23dda8505b9d130900a65f487ef008">grid_dims</a>[1],params.<a class="code hl_variable" href="../../d5/de1/structHACCGPM_1_1Params.html#a9a23dda8505b9d130900a65f487ef008">grid_dims</a>[2]);</div>
<div class="line"><span class="lineno">  204</span>    int3 grid_coords = make_int3(params.<a class="code hl_variable" href="../../d5/de1/structHACCGPM_1_1Params.html#afa3eed6c5e54ad99c399ce531fa62168">grid_coords</a>[0],params.<a class="code hl_variable" href="../../d5/de1/structHACCGPM_1_1Params.html#afa3eed6c5e54ad99c399ce531fa62168">grid_coords</a>[1],params.<a class="code hl_variable" href="../../d5/de1/structHACCGPM_1_1Params.html#afa3eed6c5e54ad99c399ce531fa62168">grid_coords</a>[2]);</div>
<div class="line"><span class="lineno">  205</span> </div>
<div class="line"><span class="lineno">  206</span><span class="preprocessor">    #ifdef VerboseTransfer</span></div>
<div class="line"><span class="lineno">  207</span>    <span class="keywordflow">if</span>(params.<a class="code hl_variable" href="../../d5/de1/structHACCGPM_1_1Params.html#abadfe590c1eee74fb0e6706a2538eba4">world_rank</a> == 0)printf(<span class="stringliteral">&quot;%stransferParticles was called\n&quot;</span>,indent);</div>
<div class="line"><span class="lineno">  208</span><span class="preprocessor">    #endif</span></div>
<div class="line"><span class="lineno">  209</span> </div>
<div class="line"><span class="lineno">  210</span>    float4* tmp_swap_pos[27];</div>
<div class="line"><span class="lineno">  211</span>    float4* tmp_swap_vel[27];</div>
<div class="line"><span class="lineno">  212</span> </div>
<div class="line"><span class="lineno">  213</span>    <span class="keywordtype">int</span> n_swaps[27];</div>
<div class="line"><span class="lineno">  214</span>    </div>
<div class="line"><span class="lineno">  215</span><span class="preprocessor">    #ifdef VerboseTransfer</span></div>
<div class="line"><span class="lineno">  216</span>    <span class="keywordflow">if</span>(params.<a class="code hl_variable" href="../../d5/de1/structHACCGPM_1_1Params.html#abadfe590c1eee74fb0e6706a2538eba4">world_rank</a> == 0)printf(<span class="stringliteral">&quot;%s   Loading buffers\n&quot;</span>,indent);</div>
<div class="line"><span class="lineno">  217</span><span class="preprocessor">    #endif</span></div>
<div class="line"><span class="lineno">  218</span> </div>
<div class="line"><span class="lineno">  219</span>    <a class="code hl_typedef" href="../../da/d0d/haccgpm_8hpp.html#aa790b6767cf9152c32b179d29c46e3ef">CPUTimer_t</a> gpu_time = 0;</div>
<div class="line"><span class="lineno">  220</span>    gpu_time += <a class="code hl_function" href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html#a732c4638e4b8fc8959263d43cc8cccdf">HACCGPM::parallel::initLoadIntoBuffers</a>(tmp_swap_pos,tmp_swap_vel,n_swaps,mem.<a class="code hl_variable" href="../../db/da8/classHACCGPM_1_1parallel_1_1MemoryManager.html#a3626bf3ccd0b81b73f73d29316d2dff3">d_pos</a>,mem.<a class="code hl_variable" href="../../db/da8/classHACCGPM_1_1parallel_1_1MemoryManager.html#a1bf27684925da59bdf0bb461f126dc0d">d_vel</a>,params.<a class="code hl_variable" href="../../d5/de1/structHACCGPM_1_1Params.html#a58f805768e0a0e28e25a3acc63fea57b">nlocal</a>,local_grid_size,n_particles,params.<a class="code hl_variable" href="../../d5/de1/structHACCGPM_1_1Params.html#a571a4ce79600b587e0a89620683fc00d">blockSize</a>,params.<a class="code hl_variable" href="../../d5/de1/structHACCGPM_1_1Params.html#abadfe590c1eee74fb0e6706a2538eba4">world_rank</a>,calls+1);</div>
<div class="line"><span class="lineno">  221</span> </div>
<div class="line"><span class="lineno">  222</span><span class="preprocessor">    #ifdef VerboseTransfer</span></div>
<div class="line"><span class="lineno">  223</span>    <span class="keywordflow">if</span>(params.<a class="code hl_variable" href="../../d5/de1/structHACCGPM_1_1Params.html#abadfe590c1eee74fb0e6706a2538eba4">world_rank</a> == 0)printf(<span class="stringliteral">&quot;%s      Loaded buffers\n&quot;</span>,indent);</div>
<div class="line"><span class="lineno">  224</span><span class="preprocessor">    #endif</span></div>
<div class="line"><span class="lineno">  225</span> </div>
<div class="line"><span class="lineno">  226</span>    <span class="keywordtype">int</span> remaining = n_swaps[13];</div>
<div class="line"><span class="lineno">  227</span> </div>
<div class="line"><span class="lineno">  228</span>    <span class="keywordtype">int</span> n_recvs[params.<a class="code hl_variable" href="../../d5/de1/structHACCGPM_1_1Params.html#acb2ba048d9a5776f65843bc184c5d6f0">world_size</a>];</div>
<div class="line"><span class="lineno">  229</span>    <a class="code hl_function" href="../../d9/dec/transfers_8cpp.html#a623988a859e51c0c16684d10bd07df87">zero</a>(n_recvs,params.<a class="code hl_variable" href="../../d5/de1/structHACCGPM_1_1Params.html#acb2ba048d9a5776f65843bc184c5d6f0">world_size</a>);</div>
<div class="line"><span class="lineno">  230</span>    <span class="keywordtype">int</span> n_sends[params.<a class="code hl_variable" href="../../d5/de1/structHACCGPM_1_1Params.html#acb2ba048d9a5776f65843bc184c5d6f0">world_size</a>];</div>
<div class="line"><span class="lineno">  231</span>    <a class="code hl_function" href="../../d9/dec/transfers_8cpp.html#a623988a859e51c0c16684d10bd07df87">zero</a>(n_sends,params.<a class="code hl_variable" href="../../d5/de1/structHACCGPM_1_1Params.html#acb2ba048d9a5776f65843bc184c5d6f0">world_size</a>);</div>
<div class="line"><span class="lineno">  232</span>    float4* pos_recvs[params.<a class="code hl_variable" href="../../d5/de1/structHACCGPM_1_1Params.html#acb2ba048d9a5776f65843bc184c5d6f0">world_size</a>];</div>
<div class="line"><span class="lineno">  233</span>    float4* vel_recvs[params.<a class="code hl_variable" href="../../d5/de1/structHACCGPM_1_1Params.html#acb2ba048d9a5776f65843bc184c5d6f0">world_size</a>];</div>
<div class="line"><span class="lineno">  234</span>    float4* pos_sends[params.<a class="code hl_variable" href="../../d5/de1/structHACCGPM_1_1Params.html#acb2ba048d9a5776f65843bc184c5d6f0">world_size</a>];</div>
<div class="line"><span class="lineno">  235</span>    float4* vel_sends[params.<a class="code hl_variable" href="../../d5/de1/structHACCGPM_1_1Params.html#acb2ba048d9a5776f65843bc184c5d6f0">world_size</a>];</div>
<div class="line"><span class="lineno">  236</span> </div>
<div class="line"><span class="lineno">  237</span>    <a class="code hl_function" href="../../d9/dec/transfers_8cpp.html#ad971c19126de159d299c18cf57af6877">sends_per_rank</a>(n_sends,n_swaps,grid_coords,global_grid_size);</div>
<div class="line"><span class="lineno">  238</span> </div>
<div class="line"><span class="lineno">  239</span>    <a class="code hl_function" href="../../d9/dec/transfers_8cpp.html#a9b07afb81e6ca51846ebbbdc77ec0ad2">combine_sends</a>(pos_sends,vel_sends,tmp_swap_pos,tmp_swap_vel,n_sends,n_swaps,grid_coords,global_grid_size,params.<a class="code hl_variable" href="../../d5/de1/structHACCGPM_1_1Params.html#acb2ba048d9a5776f65843bc184c5d6f0">world_size</a>,params.<a class="code hl_variable" href="../../d5/de1/structHACCGPM_1_1Params.html#abadfe590c1eee74fb0e6706a2538eba4">world_rank</a>);</div>
<div class="line"><span class="lineno">  240</span>    MPI_Barrier(MPI_COMM_WORLD);</div>
<div class="line"><span class="lineno">  241</span>    <a class="code hl_typedef" href="../../da/d0d/haccgpm_8hpp.html#aa790b6767cf9152c32b179d29c46e3ef">CPUTimer_t</a> mpi_time = <a class="code hl_function" href="../../d9/dec/transfers_8cpp.html#a2050db7321dcbcdaf8a7e1e90b766dd2">send_recv_data</a>(params.<a class="code hl_variable" href="../../d5/de1/structHACCGPM_1_1Params.html#acb2ba048d9a5776f65843bc184c5d6f0">world_size</a>,params.<a class="code hl_variable" href="../../d5/de1/structHACCGPM_1_1Params.html#abadfe590c1eee74fb0e6706a2538eba4">world_rank</a>,n_sends,n_recvs,pos_recvs,vel_recvs,pos_sends,vel_sends,calls+1);</div>
<div class="line"><span class="lineno">  242</span>    MPI_Barrier(MPI_COMM_WORLD);</div>
<div class="line"><span class="lineno">  243</span>    <span class="keywordtype">int</span> total_recieved = 0;</div>
<div class="line"><span class="lineno">  244</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; params.<a class="code hl_variable" href="../../d5/de1/structHACCGPM_1_1Params.html#acb2ba048d9a5776f65843bc184c5d6f0">world_size</a>; i++){</div>
<div class="line"><span class="lineno">  245</span>        total_recieved += n_recvs[i];</div>
<div class="line"><span class="lineno">  246</span>    }</div>
<div class="line"><span class="lineno">  247</span> </div>
<div class="line"><span class="lineno">  248</span><span class="preprocessor">    #ifdef VerboseTransfer</span></div>
<div class="line"><span class="lineno">  249</span>    MPI_Barrier(MPI_COMM_WORLD);</div>
<div class="line"><span class="lineno">  250</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; params.<a class="code hl_variable" href="../../d5/de1/structHACCGPM_1_1Params.html#acb2ba048d9a5776f65843bc184c5d6f0">world_size</a>; i++){</div>
<div class="line"><span class="lineno">  251</span>        </div>
<div class="line"><span class="lineno">  252</span>        <span class="keywordflow">if</span>(params.<a class="code hl_variable" href="../../d5/de1/structHACCGPM_1_1Params.html#abadfe590c1eee74fb0e6706a2538eba4">world_rank</a> == i)printf(<span class="stringliteral">&quot;%s   Rank %d: Total Recieved = %d\n&quot;</span>,indent,params.<a class="code hl_variable" href="../../d5/de1/structHACCGPM_1_1Params.html#abadfe590c1eee74fb0e6706a2538eba4">world_rank</a>,total_recieved);</div>
<div class="line"><span class="lineno">  253</span>        MPI_Barrier(MPI_COMM_WORLD);</div>
<div class="line"><span class="lineno">  254</span>    }</div>
<div class="line"><span class="lineno">  255</span>    MPI_Barrier(MPI_COMM_WORLD);</div>
<div class="line"><span class="lineno">  256</span><span class="preprocessor">    #endif</span></div>
<div class="line"><span class="lineno">  257</span> </div>
<div class="line"><span class="lineno">  258</span>    float4* pos_to_transfer = (float4*)malloc(<span class="keyword">sizeof</span>(float4)*total_recieved);</div>
<div class="line"><span class="lineno">  259</span>    float4* vel_to_transfer = (float4*)malloc(<span class="keyword">sizeof</span>(float4)*total_recieved);</div>
<div class="line"><span class="lineno">  260</span> </div>
<div class="line"><span class="lineno">  261</span>    <span class="keywordtype">int</span> idx = 0;</div>
<div class="line"><span class="lineno">  262</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; params.<a class="code hl_variable" href="../../d5/de1/structHACCGPM_1_1Params.html#acb2ba048d9a5776f65843bc184c5d6f0">world_size</a>; i++){</div>
<div class="line"><span class="lineno">  263</span>        <span class="keywordflow">if</span> (i != params.<a class="code hl_variable" href="../../d5/de1/structHACCGPM_1_1Params.html#abadfe590c1eee74fb0e6706a2538eba4">world_rank</a>){</div>
<div class="line"><span class="lineno">  264</span>            <span class="keywordflow">if</span> (n_recvs[i] != 0){</div>
<div class="line"><span class="lineno">  265</span>                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; n_recvs[i]; j++){</div>
<div class="line"><span class="lineno">  266</span>                    <span class="keywordflow">if</span> (idx &gt;= total_recieved){</div>
<div class="line"><span class="lineno">  267</span>                        printf(<span class="stringliteral">&quot;????\n&quot;</span>);</div>
<div class="line"><span class="lineno">  268</span>                    }</div>
<div class="line"><span class="lineno">  269</span>                    pos_to_transfer[idx] = pos_recvs[i][j];</div>
<div class="line"><span class="lineno">  270</span>                    vel_to_transfer[idx] = vel_recvs[i][j];</div>
<div class="line"><span class="lineno">  271</span>                    idx++;</div>
<div class="line"><span class="lineno">  272</span>                }</div>
<div class="line"><span class="lineno">  273</span>            }</div>
<div class="line"><span class="lineno">  274</span>        }</div>
<div class="line"><span class="lineno">  275</span>    }</div>
<div class="line"><span class="lineno">  276</span> </div>
<div class="line"><span class="lineno">  277</span>    gpu_time += <a class="code hl_function" href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html#ada405e83d092ec5f01435cb23d1e2927">HACCGPM::parallel::insertParticles</a>(mem.<a class="code hl_variable" href="../../db/da8/classHACCGPM_1_1parallel_1_1MemoryManager.html#a3626bf3ccd0b81b73f73d29316d2dff3">d_pos</a>,mem.<a class="code hl_variable" href="../../db/da8/classHACCGPM_1_1parallel_1_1MemoryManager.html#a1bf27684925da59bdf0bb461f126dc0d">d_vel</a>,pos_to_transfer,vel_to_transfer,total_recieved,remaining,params.<a class="code hl_variable" href="../../d5/de1/structHACCGPM_1_1Params.html#a363928a721d27c766c0882a38d0d6e9a">n_particles</a>,params.<a class="code hl_variable" href="../../d5/de1/structHACCGPM_1_1Params.html#a571a4ce79600b587e0a89620683fc00d">blockSize</a>,params.<a class="code hl_variable" href="../../d5/de1/structHACCGPM_1_1Params.html#abadfe590c1eee74fb0e6706a2538eba4">world_rank</a>,calls+1);</div>
<div class="line"><span class="lineno">  278</span> </div>
<div class="line"><span class="lineno">  279</span>    free(pos_to_transfer);</div>
<div class="line"><span class="lineno">  280</span>    free(vel_to_transfer);</div>
<div class="line"><span class="lineno">  281</span> </div>
<div class="line"><span class="lineno">  282</span>    <a class="code hl_typedef" href="../../da/d0d/haccgpm_8hpp.html#aa790b6767cf9152c32b179d29c46e3ef">CPUTimer_t</a> end = <a class="code hl_function" href="../../da/d0d/haccgpm_8hpp.html#a78588985bccaffcba4aa40467d7961d6">CPUTimer</a>();</div>
<div class="line"><span class="lineno">  283</span>    <a class="code hl_typedef" href="../../da/d0d/haccgpm_8hpp.html#aa790b6767cf9152c32b179d29c46e3ef">CPUTimer_t</a> total_time = end-start;</div>
<div class="line"><span class="lineno">  284</span> </div>
<div class="line"><span class="lineno">  285</span>    <a class="code hl_variable" href="../../d9/dec/transfers_8cpp.html#a4dc572e7a9c13a695ed78af5920c07a5">TRANSFER_CALLS</a>++;</div>
<div class="line"><span class="lineno">  286</span>    <a class="code hl_variable" href="../../d9/dec/transfers_8cpp.html#ad2e607ddb933c7b589bdc62eaa542044">TRANSFER_TIME</a> += total_time;</div>
<div class="line"><span class="lineno">  287</span>    <a class="code hl_variable" href="../../d9/dec/transfers_8cpp.html#a786261e6f4b64c51b4aba20b05999f15">TRANSFER_GPU_TIME</a> += gpu_time;</div>
<div class="line"><span class="lineno">  288</span>    <a class="code hl_variable" href="../../d9/dec/transfers_8cpp.html#a95c41c3b9c2138c4fbbb17b459b08a22">TRANSFER_MPI_TIME</a> += mpi_time;</div>
<div class="line"><span class="lineno">  289</span> </div>
<div class="line"><span class="lineno">  290</span> </div>
<div class="line"><span class="lineno">  291</span><span class="preprocessor">    #ifdef VerboseTransfer</span></div>
<div class="line"><span class="lineno">  292</span>    <span class="keywordflow">if</span>(params.<a class="code hl_variable" href="../../d5/de1/structHACCGPM_1_1Params.html#abadfe590c1eee74fb0e6706a2538eba4">world_rank</a> == 0)printf(<span class="stringliteral">&quot;%s   transferParticles took %llu us\n&quot;</span>,indent,total_time);</div>
<div class="line"><span class="lineno">  293</span><span class="preprocessor">    #endif</span></div>
<div class="line"><span class="lineno">  294</span>}</div>
<div class="ttc" id="anamespaceHACCGPM_1_1parallel_html_a732c4638e4b8fc8959263d43cc8cccdf"><div class="ttname"><a href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html#a732c4638e4b8fc8959263d43cc8cccdf">HACCGPM::parallel::initLoadIntoBuffers</a></div><div class="ttdeci">CPUTimer_t initLoadIntoBuffers(float4 **swap_pos, float4 **swap_vel, int *n_swaps, float4 *d_pos, float4 *d_vel, int nlocal, int3 local_grid_size, int n_particles, int blockSize, int world_rank, int calls=0)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/dc6/particleswapkernels_8cu_source.html#l00232">particleswapkernels.cu:232</a></div></div>
<div class="ttc" id="anamespaceHACCGPM_1_1parallel_html_ada405e83d092ec5f01435cb23d1e2927"><div class="ttname"><a href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html#ada405e83d092ec5f01435cb23d1e2927">HACCGPM::parallel::insertParticles</a></div><div class="ttdeci">CPUTimer_t insertParticles(float4 *d_pos, float4 *d_vel, float4 *new_pos, float4 *new_vel, int n_new, int remaining, int n_particles, int blockSize, int world_rank, int calls=0)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/dc6/particleswapkernels_8cu_source.html#l00210">particleswapkernels.cu:210</a></div></div>
<div class="ttc" id="astructHACCGPM_1_1Params_html_a363928a721d27c766c0882a38d0d6e9a"><div class="ttname"><a href="../../d5/de1/structHACCGPM_1_1Params.html#a363928a721d27c766c0882a38d0d6e9a">HACCGPM::Params::n_particles</a></div><div class="ttdeci">int n_particles</div><div class="ttdef"><b>Definition</b> <a href="../../da/d0d/haccgpm_8hpp_source.html#l00093">haccgpm.hpp:93</a></div></div>
<div class="ttc" id="astructHACCGPM_1_1Params_html_a36eb38d8a633ba0f7d968c99b42bac83"><div class="ttname"><a href="../../d5/de1/structHACCGPM_1_1Params.html#a36eb38d8a633ba0f7d968c99b42bac83">HACCGPM::Params::local_grid_size</a></div><div class="ttdeci">int local_grid_size[3]</div><div class="ttdef"><b>Definition</b> <a href="../../da/d0d/haccgpm_8hpp_source.html#l00090">haccgpm.hpp:90</a></div></div>
<div class="ttc" id="astructHACCGPM_1_1Params_html_a571a4ce79600b587e0a89620683fc00d"><div class="ttname"><a href="../../d5/de1/structHACCGPM_1_1Params.html#a571a4ce79600b587e0a89620683fc00d">HACCGPM::Params::blockSize</a></div><div class="ttdeci">int blockSize</div><div class="ttdef"><b>Definition</b> <a href="../../da/d0d/haccgpm_8hpp_source.html#l00053">haccgpm.hpp:53</a></div></div>
<div class="ttc" id="astructHACCGPM_1_1Params_html_a58f805768e0a0e28e25a3acc63fea57b"><div class="ttname"><a href="../../d5/de1/structHACCGPM_1_1Params.html#a58f805768e0a0e28e25a3acc63fea57b">HACCGPM::Params::nlocal</a></div><div class="ttdeci">int nlocal</div><div class="ttdef"><b>Definition</b> <a href="../../da/d0d/haccgpm_8hpp_source.html#l00085">haccgpm.hpp:85</a></div></div>
<div class="ttc" id="astructHACCGPM_1_1Params_html_a8aa635cdca8d48b92f7a9a7d4c1e5f83"><div class="ttname"><a href="../../d5/de1/structHACCGPM_1_1Params.html#a8aa635cdca8d48b92f7a9a7d4c1e5f83">HACCGPM::Params::frac</a></div><div class="ttdeci">float frac</div><div class="ttdef"><b>Definition</b> <a href="../../da/d0d/haccgpm_8hpp_source.html#l00086">haccgpm.hpp:86</a></div></div>
<div class="ttc" id="astructHACCGPM_1_1Params_html_a9a23dda8505b9d130900a65f487ef008"><div class="ttname"><a href="../../d5/de1/structHACCGPM_1_1Params.html#a9a23dda8505b9d130900a65f487ef008">HACCGPM::Params::grid_dims</a></div><div class="ttdeci">int grid_dims[3]</div><div class="ttdef"><b>Definition</b> <a href="../../da/d0d/haccgpm_8hpp_source.html#l00091">haccgpm.hpp:91</a></div></div>
<div class="ttc" id="astructHACCGPM_1_1Params_html_abadfe590c1eee74fb0e6706a2538eba4"><div class="ttname"><a href="../../d5/de1/structHACCGPM_1_1Params.html#abadfe590c1eee74fb0e6706a2538eba4">HACCGPM::Params::world_rank</a></div><div class="ttdeci">int world_rank</div><div class="ttdef"><b>Definition</b> <a href="../../da/d0d/haccgpm_8hpp_source.html#l00087">haccgpm.hpp:87</a></div></div>
<div class="ttc" id="astructHACCGPM_1_1Params_html_acb2ba048d9a5776f65843bc184c5d6f0"><div class="ttname"><a href="../../d5/de1/structHACCGPM_1_1Params.html#acb2ba048d9a5776f65843bc184c5d6f0">HACCGPM::Params::world_size</a></div><div class="ttdeci">int world_size</div><div class="ttdef"><b>Definition</b> <a href="../../da/d0d/haccgpm_8hpp_source.html#l00088">haccgpm.hpp:88</a></div></div>
<div class="ttc" id="astructHACCGPM_1_1Params_html_afa3eed6c5e54ad99c399ce531fa62168"><div class="ttname"><a href="../../d5/de1/structHACCGPM_1_1Params.html#afa3eed6c5e54ad99c399ce531fa62168">HACCGPM::Params::grid_coords</a></div><div class="ttdeci">int grid_coords[3]</div><div class="ttdef"><b>Definition</b> <a href="../../da/d0d/haccgpm_8hpp_source.html#l00092">haccgpm.hpp:92</a></div></div>
<div class="ttc" id="atransfers_8cpp_html_a2050db7321dcbcdaf8a7e1e90b766dd2"><div class="ttname"><a href="../../d9/dec/transfers_8cpp.html#a2050db7321dcbcdaf8a7e1e90b766dd2">send_recv_data</a></div><div class="ttdeci">CPUTimer_t send_recv_data(int world_size, int world_rank, int *n_sends, int *n_recvs, float4 **pos_recvs, float4 **vel_recvs, float4 **pos_sends, float4 **vel_sends, int calls)</div><div class="ttdef"><b>Definition</b> <a href="../../d9/dec/transfers_8cpp_source.html#l00078">transfers.cpp:78</a></div></div>
<div class="ttc" id="atransfers_8cpp_html_a4dc572e7a9c13a695ed78af5920c07a5"><div class="ttname"><a href="../../d9/dec/transfers_8cpp.html#a4dc572e7a9c13a695ed78af5920c07a5">TRANSFER_CALLS</a></div><div class="ttdeci">int TRANSFER_CALLS</div><div class="ttdef"><b>Definition</b> <a href="../../d9/dec/transfers_8cpp_source.html#l00009">transfers.cpp:9</a></div></div>
<div class="ttc" id="atransfers_8cpp_html_a623988a859e51c0c16684d10bd07df87"><div class="ttname"><a href="../../d9/dec/transfers_8cpp.html#a623988a859e51c0c16684d10bd07df87">zero</a></div><div class="ttdeci">void zero(int *ptr, int n)</div><div class="ttdef"><b>Definition</b> <a href="../../d9/dec/transfers_8cpp_source.html#l00019">transfers.cpp:19</a></div></div>
<div class="ttc" id="atransfers_8cpp_html_a786261e6f4b64c51b4aba20b05999f15"><div class="ttname"><a href="../../d9/dec/transfers_8cpp.html#a786261e6f4b64c51b4aba20b05999f15">TRANSFER_GPU_TIME</a></div><div class="ttdeci">CPUTimer_t TRANSFER_GPU_TIME</div><div class="ttdef"><b>Definition</b> <a href="../../d9/dec/transfers_8cpp_source.html#l00012">transfers.cpp:12</a></div></div>
<div class="ttc" id="atransfers_8cpp_html_a95c41c3b9c2138c4fbbb17b459b08a22"><div class="ttname"><a href="../../d9/dec/transfers_8cpp.html#a95c41c3b9c2138c4fbbb17b459b08a22">TRANSFER_MPI_TIME</a></div><div class="ttdeci">CPUTimer_t TRANSFER_MPI_TIME</div><div class="ttdef"><b>Definition</b> <a href="../../d9/dec/transfers_8cpp_source.html#l00011">transfers.cpp:11</a></div></div>
<div class="ttc" id="atransfers_8cpp_html_a9b07afb81e6ca51846ebbbdc77ec0ad2"><div class="ttname"><a href="../../d9/dec/transfers_8cpp.html#a9b07afb81e6ca51846ebbbdc77ec0ad2">combine_sends</a></div><div class="ttdeci">void combine_sends(float4 **pos_sends, float4 **vel_sends, float4 **tmp_swap_pos, float4 **tmp_swap_vel, int *n_sends, int *n_swaps, int3 grid_coords, int3 global_grid_size, int world_size, int world_rank)</div><div class="ttdef"><b>Definition</b> <a href="../../d9/dec/transfers_8cpp_source.html#l00043">transfers.cpp:43</a></div></div>
<div class="ttc" id="atransfers_8cpp_html_ad2e607ddb933c7b589bdc62eaa542044"><div class="ttname"><a href="../../d9/dec/transfers_8cpp.html#ad2e607ddb933c7b589bdc62eaa542044">TRANSFER_TIME</a></div><div class="ttdeci">CPUTimer_t TRANSFER_TIME</div><div class="ttdef"><b>Definition</b> <a href="../../d9/dec/transfers_8cpp_source.html#l00010">transfers.cpp:10</a></div></div>
<div class="ttc" id="atransfers_8cpp_html_ad971c19126de159d299c18cf57af6877"><div class="ttname"><a href="../../d9/dec/transfers_8cpp.html#ad971c19126de159d299c18cf57af6877">sends_per_rank</a></div><div class="ttdeci">void sends_per_rank(int *n_sends, int *n_swaps, int3 grid_coords, int3 global_grid_size)</div><div class="ttdef"><b>Definition</b> <a href="../../d9/dec/transfers_8cpp_source.html#l00025">transfers.cpp:25</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/d0d/haccgpm_8hpp_source.html#l00053">HACCGPM::Params::blockSize</a>, <a class="el" href="../../d9/dec/transfers_8cpp_source.html#l00043">combine_sends()</a>, <a class="el" href="../../da/d0d/haccgpm_8hpp_source.html#l00014">CPUTimer()</a>, <a class="el" href="../../da/d0d/haccgpm_8hpp_source.html#l00125">HACCGPM::parallel::MemoryManager::d_pos</a>, <a class="el" href="../../da/d0d/haccgpm_8hpp_source.html#l00126">HACCGPM::parallel::MemoryManager::d_vel</a>, <a class="el" href="../../da/d0d/haccgpm_8hpp_source.html#l00086">HACCGPM::Params::frac</a>, <a class="el" href="../../d1/dc2/ccamb_8c_source.html#l00009">getIndent</a>, <a class="el" href="../../da/d0d/haccgpm_8hpp_source.html#l00092">HACCGPM::Params::grid_coords</a>, <a class="el" href="../../da/d0d/haccgpm_8hpp_source.html#l00091">HACCGPM::Params::grid_dims</a>, <a class="el" href="../../d1/dc6/particleswapkernels_8cu_source.html#l00232">initLoadIntoBuffers()</a>, <a class="el" href="../../d1/dc6/particleswapkernels_8cu_source.html#l00210">insertParticles()</a>, <a class="el" href="../../da/d0d/haccgpm_8hpp_source.html#l00090">HACCGPM::Params::local_grid_size</a>, <a class="el" href="../../da/d0d/haccgpm_8hpp_source.html#l00093">HACCGPM::Params::n_particles</a>, <a class="el" href="../../da/d0d/haccgpm_8hpp_source.html#l00085">HACCGPM::Params::nlocal</a>, <a class="el" href="../../d9/dec/transfers_8cpp_source.html#l00078">send_recv_data()</a>, <a class="el" href="../../d9/dec/transfers_8cpp_source.html#l00025">sends_per_rank()</a>, <a class="el" href="../../d9/dec/transfers_8cpp_source.html#l00009">TRANSFER_CALLS</a>, <a class="el" href="../../d9/dec/transfers_8cpp_source.html#l00012">TRANSFER_GPU_TIME</a>, <a class="el" href="../../d9/dec/transfers_8cpp_source.html#l00011">TRANSFER_MPI_TIME</a>, <a class="el" href="../../d9/dec/transfers_8cpp_source.html#l00010">TRANSFER_TIME</a>, <a class="el" href="../../da/d0d/haccgpm_8hpp_source.html#l00087">HACCGPM::Params::world_rank</a>, <a class="el" href="../../da/d0d/haccgpm_8hpp_source.html#l00088">HACCGPM::Params::world_size</a>, and <a class="el" href="../../d9/dec/transfers_8cpp_source.html#l00019">zero()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d15/driver_8cpp_source.html#l00123">parallel()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/d3f/namespaceHACCGPM_1_1parallel_ab67a1d4d424d75f9fd6046323ae44ec1_cgraph.png" border="0" usemap="#ad1/d3f/namespaceHACCGPM_1_1parallel_ab67a1d4d424d75f9fd6046323ae44ec1_cgraph" alt=""/></div>
<map name="ad1/d3f/namespaceHACCGPM_1_1parallel_ab67a1d4d424d75f9fd6046323ae44ec1_cgraph" id="ad1/d3f/namespaceHACCGPM_1_1parallel_ab67a1d4d424d75f9fd6046323ae44ec1_cgraph">
<area shape="rect" title=" " alt="" coords="5,149,153,189"/>
<area shape="rect" href="../../d9/dec/transfers_8cpp.html#a9b07afb81e6ca51846ebbbdc77ec0ad2" title=" " alt="" coords="219,55,332,80"/>
<area shape="poly" title=" " alt="" coords="111,146,200,97,230,83,233,88,203,102,114,151"/>
<area shape="rect" href="../../d9/dec/transfers_8cpp.html#a623988a859e51c0c16684d10bd07df87" title=" " alt="" coords="435,80,482,105"/>
<area shape="poly" title=" " alt="" coords="153,151,422,97,423,103,154,156"/>
<area shape="rect" href="../../da/d0d/haccgpm_8hpp.html#a78588985bccaffcba4aa40467d7961d6" title=" " alt="" coords="417,160,501,185"/>
<area shape="poly" title=" " alt="" coords="153,167,403,169,403,175,153,172"/>
<area shape="rect" href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html#a732c4638e4b8fc8959263d43cc8cccdf" title=" " alt="" coords="201,257,349,297"/>
<area shape="poly" title=" " alt="" coords="111,187,203,241,217,248,215,253,200,246,108,191"/>
<area shape="rect" href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html#ada405e83d092ec5f01435cb23d1e2927" title=" " alt="" coords="201,358,349,398"/>
<area shape="poly" title=" " alt="" coords="98,187,203,307,245,347,241,351,199,311,94,190"/>
<area shape="rect" href="../../d9/dec/transfers_8cpp.html#a2050db7321dcbcdaf8a7e1e90b766dd2" title=" " alt="" coords="218,207,333,232"/>
<area shape="poly" title=" " alt="" coords="154,185,213,201,212,206,153,190"/>
<area shape="rect" href="../../d9/dec/transfers_8cpp.html#ad971c19126de159d299c18cf57af6877" title=" " alt="" coords="218,5,333,31"/>
<area shape="poly" title=" " alt="" coords="92,147,136,94,166,65,200,40,211,34,213,38,203,44,170,69,140,98,96,150"/>
<area shape="rect" href="../../d9/dec/transfers_8cpp.html#ab693f043882d2b52f64f69058b50dd10" title=" " alt="" coords="412,17,505,43"/>
<area shape="poly" title=" " alt="" coords="332,53,398,40,399,45,333,58"/>
<area shape="poly" title=" " alt="" coords="333,73,422,85,422,90,332,78"/>
<area shape="poly" title=" " alt="" coords="325,254,348,241,362,229,371,218,381,206,396,194,406,189,408,193,399,199,385,210,375,221,366,233,351,246,328,259"/>
<area shape="rect" href="../../d1/dc6/particleswapkernels_8cu.html#a5ace1b44eb57b3ce75b5c54575963da5" title=" " alt="" coords="433,209,484,235"/>
<area shape="poly" title=" " alt="" coords="342,254,419,231,421,236,343,259"/>
<area shape="rect" href="../../d1/dc6/particleswapkernels_8cu.html#a1438ea4370678803976db719c911095b" title=" " alt="" coords="399,259,518,284"/>
<area shape="poly" title=" " alt="" coords="349,272,385,271,385,276,349,277"/>
<area shape="rect" href="../../d1/dc6/particleswapkernels_8cu.html#a97414e10cc908d8a0a9a2538300df2d6" title=" " alt="" coords="403,308,514,333"/>
<area shape="poly" title=" " alt="" coords="350,292,393,302,392,307,349,297"/>
<area shape="rect" href="../../d1/dc6/particleswapkernels_8cu.html#abec6dfb3c242f73e827f5b91bde54edf" title=" " alt="" coords="397,357,520,383"/>
<area shape="poly" title=" " alt="" coords="309,294,399,344,412,350,409,354,396,348,307,299"/>
<area shape="rect" href="../../d1/dc6/particleswapkernels_8cu.html#adf4ea5aaed50b7025e1370de8c2414ae" title=" " alt="" coords="397,407,520,432"/>
<area shape="poly" title=" " alt="" coords="350,392,390,401,389,406,349,397"/>
<area shape="poly" title=" " alt="" coords="325,204,402,184,404,189,326,209"/>
<area shape="poly" title=" " alt="" coords="333,19,399,23,398,29,333,24"/>
</map>
</div>

</div>
</div>
<a id="ada405e83d092ec5f01435cb23d1e2927" name="ada405e83d092ec5f01435cb23d1e2927"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada405e83d092ec5f01435cb23d1e2927">&#9670;&#160;</a></span>insertParticles()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/d0d/haccgpm_8hpp.html#aa790b6767cf9152c32b179d29c46e3ef">CPUTimer_t</a> HACCGPM::parallel::insertParticles </td>
          <td>(</td>
          <td class="paramtype">float4 *&#160;</td>
          <td class="paramname"><em>d_pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float4 *&#160;</td>
          <td class="paramname"><em>d_vel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float4 *&#160;</td>
          <td class="paramname"><em>new_pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float4 *&#160;</td>
          <td class="paramname"><em>new_vel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n_new</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>remaining</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n_particles</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>blockSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>world_rank</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>calls</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc6/particleswapkernels_8cu_source.html#l00210">210</a> of file <a class="el" href="../../d1/dc6/particleswapkernels_8cu_source.html">particleswapkernels.cu</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  210</span>                                                                                                                                                                                              {</div>
<div class="line"><span class="lineno">  211</span>    <span class="keywordtype">int</span> numBlocks = (n_particles + blockSize - 1) / blockSize;</div>
<div class="line"><span class="lineno">  212</span>    <a class="code hl_define" href="../../d1/dc2/ccamb_8c.html#aede6a850e442b96dd236d1bed8bf19e5">getIndent</a>(calls);</div>
<div class="line"><span class="lineno">  213</span> </div>
<div class="line"><span class="lineno">  214</span><span class="preprocessor">    #ifdef VerboseSwap</span></div>
<div class="line"><span class="lineno">  215</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a> == 0)printf(<span class="stringliteral">&quot;%sinsertParticles was called with\n%s   blockSize %d\n%s   numBlocks %d\n&quot;</span>,indent,indent,blockSize,indent,numBlocks);</div>
<div class="line"><span class="lineno">  216</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a> == 0)printf(<span class="stringliteral">&quot;%s   Copying to device\n&quot;</span>,indent);</div>
<div class="line"><span class="lineno">  217</span><span class="preprocessor">    #endif</span></div>
<div class="line"><span class="lineno">  218</span> </div>
<div class="line"><span class="lineno">  219</span>    float4* d_new_pos; <a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#a28fb452217abf040d6df7890f94a54b9">cudaCall</a>(cudaMalloc,&amp;d_new_pos,<span class="keyword">sizeof</span>(float4)*n_new);</div>
<div class="line"><span class="lineno">  220</span>    float4* d_new_vel; <a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#a28fb452217abf040d6df7890f94a54b9">cudaCall</a>(cudaMalloc,&amp;d_new_vel,<span class="keyword">sizeof</span>(float4)*n_new);</div>
<div class="line"><span class="lineno">  221</span>    <a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#a28fb452217abf040d6df7890f94a54b9">cudaCall</a>(cudaMemcpy,d_new_pos,new_pos,<span class="keyword">sizeof</span>(float4)*n_new,cudaMemcpyHostToDevice);</div>
<div class="line"><span class="lineno">  222</span>    <a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#a28fb452217abf040d6df7890f94a54b9">cudaCall</a>(cudaMemcpy,d_new_vel,new_vel,<span class="keyword">sizeof</span>(float4)*n_new,cudaMemcpyHostToDevice);</div>
<div class="line"><span class="lineno">  223</span><span class="preprocessor">    #ifdef VerboseSwap</span></div>
<div class="line"><span class="lineno">  224</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a> == 0)printf(<span class="stringliteral">&quot;%s      Copied to device\n&quot;</span>,indent);</div>
<div class="line"><span class="lineno">  225</span><span class="preprocessor">    #endif</span></div>
<div class="line"><span class="lineno">  226</span>    <a class="code hl_typedef" href="../../da/d0d/haccgpm_8hpp.html#aa790b6767cf9152c32b179d29c46e3ef">CPUTimer_t</a> gpu_time = 0;</div>
<div class="line"><span class="lineno">  227</span>    <span class="comment">//gpu_time += InvokeGPUKernelParallel(findDuplicates,numBlocks,blockSize,d_pos,d_new_pos,n_new,n_particles);</span></div>
<div class="line"><span class="lineno">  228</span>    gpu_time += <a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#aeb036429c3ef20a1b4d863bf03ff5648">InvokeGPUKernelParallel</a>(<a class="code hl_function" href="../../d1/dc6/particleswapkernels_8cu.html#adf4ea5aaed50b7025e1370de8c2414ae">combineParticles</a>,numBlocks,blockSize,d_pos,d_vel,d_new_pos,d_new_vel,n_new,remaining,n_particles);</div>
<div class="line"><span class="lineno">  229</span>    <span class="keywordflow">return</span> gpu_time;</div>
<div class="line"><span class="lineno">  230</span>}</div>
<div class="ttc" id="aparticleswapkernels_8cu_html_adf4ea5aaed50b7025e1370de8c2414ae"><div class="ttname"><a href="../../d1/dc6/particleswapkernels_8cu.html#adf4ea5aaed50b7025e1370de8c2414ae">combineParticles</a></div><div class="ttdeci">__global__ void combineParticles(float4 *__restrict d_pos, float4 *__restrict d_vel, const float4 *__restrict new_pos, const float4 *__restrict new_vel, int n_new, int remaining, int n_particles)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/dc6/particleswapkernels_8cu_source.html#l00100">particleswapkernels.cu:100</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d1/dc6/particleswapkernels_8cu_source.html#l00100">combineParticles()</a>, <a class="el" href="../../da/d0d/haccgpm_8hpp_source.html#l00037">cudaCall</a>, <a class="el" href="../../d1/dc2/ccamb_8c_source.html#l00009">getIndent</a>, <a class="el" href="../../da/d0d/haccgpm_8hpp_source.html#l00041">InvokeGPUKernelParallel</a>, and <a class="el" href="../../d1/dc2/ccamb_8c_source.html#l00020">world_rank</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/dec/transfers_8cpp_source.html#l00195">initTransferParticles()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/d3f/namespaceHACCGPM_1_1parallel_ada405e83d092ec5f01435cb23d1e2927_cgraph.png" border="0" usemap="#ad1/d3f/namespaceHACCGPM_1_1parallel_ada405e83d092ec5f01435cb23d1e2927_cgraph" alt=""/></div>
<map name="ad1/d3f/namespaceHACCGPM_1_1parallel_ada405e83d092ec5f01435cb23d1e2927_cgraph" id="ad1/d3f/namespaceHACCGPM_1_1parallel_ada405e83d092ec5f01435cb23d1e2927_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,153,45"/>
<area shape="rect" href="../../d1/dc6/particleswapkernels_8cu.html#adf4ea5aaed50b7025e1370de8c2414ae" title=" " alt="" coords="201,13,324,38"/>
<area shape="poly" title=" " alt="" coords="153,23,188,23,188,28,153,28"/>
</map>
</div>

</div>
</div>
<a id="a31a4b3e867d91495908cb284b049c610" name="a31a4b3e867d91495908cb284b049c610"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31a4b3e867d91495908cb284b049c610">&#9670;&#160;</a></span>loadGridBuffers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/d0d/haccgpm_8hpp.html#aa790b6767cf9152c32b179d29c46e3ef">CPUTimer_t</a> HACCGPM::parallel::loadGridBuffers </td>
          <td>(</td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>d_extragrid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>h_transfer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int3&#160;</td>
          <td class="paramname"><em>local_grid_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>blockSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>world_rank</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>calls</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc6/particleswapkernels_8cu_source.html#l00189">189</a> of file <a class="el" href="../../d1/dc6/particleswapkernels_8cu_source.html">particleswapkernels.cu</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  189</span>                                                                                                                                                {</div>
<div class="line"><span class="lineno">  190</span>    <span class="keywordtype">int</span> n_extra = (local_grid_size.x+1)*(local_grid_size.y+1)*(local_grid_size.z+1) - (local_grid_size.x*local_grid_size.y*local_grid_size.z);</div>
<div class="line"><span class="lineno">  191</span>    <span class="keywordtype">int</span> numBlocks = (n_extra + (blockSize - 1))/blockSize;</div>
<div class="line"><span class="lineno">  192</span> </div>
<div class="line"><span class="lineno">  193</span>    <a class="code hl_define" href="../../d1/dc2/ccamb_8c.html#aede6a850e442b96dd236d1bed8bf19e5">getIndent</a>(calls);</div>
<div class="line"><span class="lineno">  194</span> </div>
<div class="line"><span class="lineno">  195</span><span class="preprocessor">    #ifdef VerboseSwap</span></div>
<div class="line"><span class="lineno">  196</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a> == 0)printf(<span class="stringliteral">&quot;%sloadGridBuffers was called with\n%s   blockSize %d\n%s   numBlocks %d\n&quot;</span>,indent,indent,blockSize,indent,numBlocks);</div>
<div class="line"><span class="lineno">  197</span><span class="preprocessor">    #endif</span></div>
<div class="line"><span class="lineno">  198</span>    </div>
<div class="line"><span class="lineno">  199</span>    <span class="keywordtype">float</span>* d_transfer; <a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#a28fb452217abf040d6df7890f94a54b9">cudaCall</a>(cudaMalloc,&amp;d_transfer,<span class="keyword">sizeof</span>(<span class="keywordtype">float</span>)*n_extra);</div>
<div class="line"><span class="lineno">  200</span> </div>
<div class="line"><span class="lineno">  201</span>    <a class="code hl_typedef" href="../../da/d0d/haccgpm_8hpp.html#aa790b6767cf9152c32b179d29c46e3ef">CPUTimer_t</a> gpu_time = <a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#aeb036429c3ef20a1b4d863bf03ff5648">InvokeGPUKernelParallel</a>(<a class="code hl_function" href="../../d1/dc6/particleswapkernels_8cu.html#aaf2d833243661c8b0d95bb5091d3382e">loadGridBuffersKernel</a>,numBlocks,blockSize,d_transfer,d_extragrid,local_grid_size,n_extra);</div>
<div class="line"><span class="lineno">  202</span> </div>
<div class="line"><span class="lineno">  203</span>    <a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#a28fb452217abf040d6df7890f94a54b9">cudaCall</a>(cudaMemcpy,h_transfer,d_transfer,<span class="keyword">sizeof</span>(<span class="keywordtype">float</span>)*n_extra,cudaMemcpyDeviceToHost);</div>
<div class="line"><span class="lineno">  204</span> </div>
<div class="line"><span class="lineno">  205</span>    <a class="code hl_define" href="../../da/d0d/haccgpm_8hpp.html#a28fb452217abf040d6df7890f94a54b9">cudaCall</a>(cudaFree,d_transfer);</div>
<div class="line"><span class="lineno">  206</span> </div>
<div class="line"><span class="lineno">  207</span>    <span class="keywordflow">return</span> gpu_time;</div>
<div class="line"><span class="lineno">  208</span>}</div>
<div class="ttc" id="aparticleswapkernels_8cu_html_aaf2d833243661c8b0d95bb5091d3382e"><div class="ttname"><a href="../../d1/dc6/particleswapkernels_8cu.html#aaf2d833243661c8b0d95bb5091d3382e">loadGridBuffersKernel</a></div><div class="ttdeci">__global__ void loadGridBuffersKernel(float *__restrict d_out, const float *__restrict d_grid, int3 local_grid_size, int n_extra)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/dc6/particleswapkernels_8cu_source.html#l00111">particleswapkernels.cu:111</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/d0d/haccgpm_8hpp_source.html#l00037">cudaCall</a>, <a class="el" href="../../d1/dc2/ccamb_8c_source.html#l00009">getIndent</a>, <a class="el" href="../../da/d0d/haccgpm_8hpp_source.html#l00041">InvokeGPUKernelParallel</a>, <a class="el" href="../../d1/dc6/particleswapkernels_8cu_source.html#l00111">loadGridBuffersKernel()</a>, and <a class="el" href="../../d1/dc2/ccamb_8c_source.html#l00020">world_rank</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/dec/transfers_8cpp_source.html#l00167">gridExchange()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/d3f/namespaceHACCGPM_1_1parallel_a31a4b3e867d91495908cb284b049c610_cgraph.png" border="0" usemap="#ad1/d3f/namespaceHACCGPM_1_1parallel_a31a4b3e867d91495908cb284b049c610_cgraph" alt=""/></div>
<map name="ad1/d3f/namespaceHACCGPM_1_1parallel_a31a4b3e867d91495908cb284b049c610_cgraph" id="ad1/d3f/namespaceHACCGPM_1_1parallel_a31a4b3e867d91495908cb284b049c610_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,153,45"/>
<area shape="rect" href="../../d1/dc6/particleswapkernels_8cu.html#aaf2d833243661c8b0d95bb5091d3382e" title=" " alt="" coords="201,13,351,38"/>
<area shape="poly" title=" " alt="" coords="154,23,187,23,187,28,154,28"/>
</map>
</div>

</div>
</div>
<a id="aafb47a3e84785288897c7c4c20d7c39f" name="aafb47a3e84785288897c7c4c20d7c39f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aafb47a3e84785288897c7c4c20d7c39f">&#9670;&#160;</a></span>printCICTimes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HACCGPM::parallel::printCICTimes </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>world_rank</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dce/cic_8cu_source.html#l00248">248</a> of file <a class="el" href="../../d6/dce/cic_8cu_source.html">cic.cu</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  248</span>                                                 {</div>
<div class="line"><span class="lineno">  249</span>    <span class="comment">//MPI_Barrier(MPI_COMM_WORLD);</span></div>
<div class="line"><span class="lineno">  250</span>    <a class="code hl_typedef" href="../../da/d0d/haccgpm_8hpp.html#aa790b6767cf9152c32b179d29c46e3ef">CPUTimer_t</a> total_min,total_max,total_mean,gpu_min,gpu_max,gpu_mean;</div>
<div class="line"><span class="lineno">  251</span>    <a class="code hl_function" href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html#a988a5e3e292fca5fb93bd5c754ff9e3c">HACCGPM::parallel::timing_stats</a>(<a class="code hl_variable" href="../../d6/dce/cic_8cu.html#ae55de4065f3d7f164bf46a83f62a5591">CIC_TIME</a>,&amp;total_min,&amp;total_max,&amp;total_mean);</div>
<div class="line"><span class="lineno">  252</span>    <a class="code hl_function" href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html#a988a5e3e292fca5fb93bd5c754ff9e3c">HACCGPM::parallel::timing_stats</a>(<a class="code hl_variable" href="../../d6/dce/cic_8cu.html#ac76179fff32b3529b4a5d73452d35b9d">CIC_KERNEL_TIME</a>,&amp;gpu_min,&amp;gpu_max,&amp;gpu_mean);</div>
<div class="line"><span class="lineno">  253</span>    <span class="comment">//HACCGPM::parallel::timing_stats(TRANSFER_MPI_TIME,&amp;mpi_min,&amp;mpi_max,&amp;mpi_mean);</span></div>
<div class="line"><span class="lineno">  254</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a> != 0)<span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  255</span>    printf(<span class="stringliteral">&quot;   CIC                -&gt; calls: %d\n&quot;</span>,<a class="code hl_variable" href="../../d6/dce/cic_8cu.html#a793ccc2e7f39360df20ee3f323e3fb8d">CIC_CALLS</a>);</div>
<div class="line"><span class="lineno">  256</span>    printf(<span class="stringliteral">&quot;                               total: %10llu us mean | %10llu us max  | %10llu us min  |\n&quot;</span>,total_mean,total_max,total_min);</div>
<div class="line"><span class="lineno">  257</span>    printf(<span class="stringliteral">&quot;                                 cpu: %10llu us mean | %10llu us max  | %10llu us min  |\n&quot;</span>,(total_mean-gpu_mean),(total_max - gpu_max), (total_min - gpu_min));</div>
<div class="line"><span class="lineno">  258</span>    printf(<span class="stringliteral">&quot;                                 gpu: %10llu us mean | %10llu us max  | %10llu us min  |\n&quot;</span>,gpu_mean,gpu_max,gpu_min);</div>
<div class="line"><span class="lineno">  259</span>    <span class="comment">//printf(&quot;                                 mpi: %10llu us mean | %10llu us max  | %10llu us min  |\n&quot;,mpi_mean,mpi_max,mpi_min);</span></div>
<div class="line"><span class="lineno">  260</span>    printf(<span class="stringliteral">&quot;                                 avg: %10llu us mean | %10llu us max  | %10llu us min  |\n&quot;</span>,total_mean / <a class="code hl_variable" href="../../d6/dce/cic_8cu.html#a793ccc2e7f39360df20ee3f323e3fb8d">CIC_CALLS</a>,total_max / <a class="code hl_variable" href="../../d6/dce/cic_8cu.html#a793ccc2e7f39360df20ee3f323e3fb8d">CIC_CALLS</a>,total_min / <a class="code hl_variable" href="../../d6/dce/cic_8cu.html#a793ccc2e7f39360df20ee3f323e3fb8d">CIC_CALLS</a>);</div>
<div class="line"><span class="lineno">  261</span>}</div>
<div class="ttc" id="anamespaceHACCGPM_1_1parallel_html_a988a5e3e292fca5fb93bd5c754ff9e3c"><div class="ttname"><a href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html#a988a5e3e292fca5fb93bd5c754ff9e3c">HACCGPM::parallel::timing_stats</a></div><div class="ttdeci">void timing_stats(CPUTimer_t t, CPUTimer_t *mint, CPUTimer_t *maxt, CPUTimer_t *meant)</div><div class="ttdef"><b>Definition</b> <a href="../../d2/db4/timers_8cpp_source.html#l00006">timers.cpp:6</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d6/dce/cic_8cu_source.html#l00009">CIC_CALLS</a>, <a class="el" href="../../d6/dce/cic_8cu_source.html#l00008">CIC_KERNEL_TIME</a>, <a class="el" href="../../d6/dce/cic_8cu_source.html#l00007">CIC_TIME</a>, <a class="el" href="../../d2/db4/timers_8cpp_source.html#l00006">timing_stats()</a>, and <a class="el" href="../../d1/dc2/ccamb_8c_source.html#l00020">world_rank</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d15/driver_8cpp_source.html#l00123">parallel()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/d3f/namespaceHACCGPM_1_1parallel_aafb47a3e84785288897c7c4c20d7c39f_cgraph.png" border="0" usemap="#ad1/d3f/namespaceHACCGPM_1_1parallel_aafb47a3e84785288897c7c4c20d7c39f_cgraph" alt=""/></div>
<map name="ad1/d3f/namespaceHACCGPM_1_1parallel_aafb47a3e84785288897c7c4c20d7c39f_cgraph" id="ad1/d3f/namespaceHACCGPM_1_1parallel_aafb47a3e84785288897c7c4c20d7c39f_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,153,45"/>
<area shape="rect" href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html#a988a5e3e292fca5fb93bd5c754ff9e3c" title=" " alt="" coords="201,5,349,45"/>
<area shape="poly" title=" " alt="" coords="153,23,188,23,188,28,153,28"/>
</map>
</div>

</div>
</div>
<a id="a123085a590cbc09148ef1558564afe8d" name="a123085a590cbc09148ef1558564afe8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a123085a590cbc09148ef1558564afe8d">&#9670;&#160;</a></span>printFFTStats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HACCGPM::parallel::printFFTStats </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>world_rank</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/df7/swfftmanager_8cpp_source.html#l00088">88</a> of file <a class="el" href="../../d4/df7/swfftmanager_8cpp_source.html">swfftmanager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   88</span>                                                 {</div>
<div class="line"><span class="lineno">   89</span>    <a class="code hl_typedef" href="../../da/d0d/haccgpm_8hpp.html#aa790b6767cf9152c32b179d29c46e3ef">CPUTimer_t</a> forward_mean,forward_min,forward_max;</div>
<div class="line"><span class="lineno">   90</span>    <a class="code hl_typedef" href="../../da/d0d/haccgpm_8hpp.html#aa790b6767cf9152c32b179d29c46e3ef">CPUTimer_t</a> backward_mean,backward_min,backward_max;</div>
<div class="line"><span class="lineno">   91</span>    <a class="code hl_function" href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html#a988a5e3e292fca5fb93bd5c754ff9e3c">HACCGPM::parallel::timing_stats</a>(<a class="code hl_variable" href="../../d4/df7/swfftmanager_8cpp.html#a7409c91becef23e50d820551897fbd93">FORWARD_FFT_TIME</a>,&amp;forward_min,&amp;forward_max,&amp;forward_mean);</div>
<div class="line"><span class="lineno">   92</span>    <a class="code hl_function" href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html#a988a5e3e292fca5fb93bd5c754ff9e3c">HACCGPM::parallel::timing_stats</a>(<a class="code hl_variable" href="../../d4/df7/swfftmanager_8cpp.html#af5b9e09cdd707cf65cb5b5613fe5b7d7">BACKWARD_FFT_TIME</a>,&amp;backward_min,&amp;backward_max,&amp;backward_mean);</div>
<div class="line"><span class="lineno">   93</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a> != 0)<span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">   94</span>    printf(<span class="stringliteral">&quot;   forward_fft        -&gt; calls: %d\n&quot;</span>,<a class="code hl_variable" href="../../d4/df7/swfftmanager_8cpp.html#a9c343dbee29f4a84fea2a139215aaf3b">FORWARD_FFT_CALLS</a>);</div>
<div class="line"><span class="lineno">   95</span>    printf(<span class="stringliteral">&quot;                               total: %10llu us mean | %10llu us max  | %10llu us min  |\n&quot;</span>,forward_mean,forward_max,forward_min);</div>
<div class="line"><span class="lineno">   96</span>    printf(<span class="stringliteral">&quot;                                 avg: %10llu us mean | %10llu us max  | %10llu us min  |\n&quot;</span>,forward_mean / <a class="code hl_variable" href="../../d4/df7/swfftmanager_8cpp.html#a9c343dbee29f4a84fea2a139215aaf3b">FORWARD_FFT_CALLS</a>,forward_max / <a class="code hl_variable" href="../../d4/df7/swfftmanager_8cpp.html#a9c343dbee29f4a84fea2a139215aaf3b">FORWARD_FFT_CALLS</a>,forward_min / <a class="code hl_variable" href="../../d4/df7/swfftmanager_8cpp.html#a9c343dbee29f4a84fea2a139215aaf3b">FORWARD_FFT_CALLS</a>);</div>
<div class="line"><span class="lineno">   97</span>    printf(<span class="stringliteral">&quot;   backward_fft       -&gt; calls: %d\n&quot;</span>,<a class="code hl_variable" href="../../d4/df7/swfftmanager_8cpp.html#a98af84effc7fdd349e43f89c9667ce36">BACKWARD_FFT_CALLS</a>);</div>
<div class="line"><span class="lineno">   98</span>    printf(<span class="stringliteral">&quot;                               total: %10llu us mean | %10llu us max  | %10llu us min  |\n&quot;</span>,backward_mean,backward_max,backward_min);</div>
<div class="line"><span class="lineno">   99</span>    printf(<span class="stringliteral">&quot;                                 avg: %10llu us mean | %10llu us max  | %10llu us min  |\n&quot;</span>,backward_mean / <a class="code hl_variable" href="../../d4/df7/swfftmanager_8cpp.html#a98af84effc7fdd349e43f89c9667ce36">BACKWARD_FFT_CALLS</a>,backward_max / <a class="code hl_variable" href="../../d4/df7/swfftmanager_8cpp.html#a98af84effc7fdd349e43f89c9667ce36">BACKWARD_FFT_CALLS</a>,backward_min / <a class="code hl_variable" href="../../d4/df7/swfftmanager_8cpp.html#a98af84effc7fdd349e43f89c9667ce36">BACKWARD_FFT_CALLS</a>);</div>
<div class="line"><span class="lineno">  100</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d4/df7/swfftmanager_8cpp_source.html#l00014">BACKWARD_FFT_CALLS</a>, <a class="el" href="../../d4/df7/swfftmanager_8cpp_source.html#l00013">BACKWARD_FFT_TIME</a>, <a class="el" href="../../d4/df7/swfftmanager_8cpp_source.html#l00012">FORWARD_FFT_CALLS</a>, <a class="el" href="../../d4/df7/swfftmanager_8cpp_source.html#l00011">FORWARD_FFT_TIME</a>, <a class="el" href="../../d2/db4/timers_8cpp_source.html#l00006">timing_stats()</a>, and <a class="el" href="../../d1/dc2/ccamb_8c_source.html#l00020">world_rank</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d15/driver_8cpp_source.html#l00123">parallel()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/d3f/namespaceHACCGPM_1_1parallel_a123085a590cbc09148ef1558564afe8d_cgraph.png" border="0" usemap="#ad1/d3f/namespaceHACCGPM_1_1parallel_a123085a590cbc09148ef1558564afe8d_cgraph" alt=""/></div>
<map name="ad1/d3f/namespaceHACCGPM_1_1parallel_a123085a590cbc09148ef1558564afe8d_cgraph" id="ad1/d3f/namespaceHACCGPM_1_1parallel_a123085a590cbc09148ef1558564afe8d_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,153,45"/>
<area shape="rect" href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html#a988a5e3e292fca5fb93bd5c754ff9e3c" title=" " alt="" coords="201,5,349,45"/>
<area shape="poly" title=" " alt="" coords="153,23,188,23,188,28,153,28"/>
</map>
</div>

</div>
</div>
<a id="a709934c2ca1db4459e610dc7f7441d7d" name="a709934c2ca1db4459e610dc7f7441d7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a709934c2ca1db4459e610dc7f7441d7d">&#9670;&#160;</a></span>printTransferBytes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HACCGPM::parallel::printTransferBytes </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>world_rank</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/dec/transfers_8cpp_source.html#l00296">296</a> of file <a class="el" href="../../d9/dec/transfers_8cpp_source.html">transfers.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  296</span>                                                      {</div>
<div class="line"><span class="lineno">  297</span>    MPI_Barrier(MPI_COMM_WORLD);</div>
<div class="line"><span class="lineno">  298</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> my_bytes = <a class="code hl_variable" href="../../d9/dec/transfers_8cpp.html#a14b788c3f735a7b27f2e949757f2cf6e">TRANSFER_BYTES</a>;</div>
<div class="line"><span class="lineno">  299</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> bytes;</div>
<div class="line"><span class="lineno">  300</span>    MPI_Reduce(&amp;my_bytes,&amp;bytes,1,MPI_UNSIGNED_LONG_LONG,MPI_SUM,0,MPI_COMM_WORLD);</div>
<div class="line"><span class="lineno">  301</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a> != 0)<span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  302</span>    printf(<span class="stringliteral">&quot;   transferParticles -&gt; calls: %10d | transferred %llu bytes\n&quot;</span>,<a class="code hl_variable" href="../../d9/dec/transfers_8cpp.html#a4dc572e7a9c13a695ed78af5920c07a5">TRANSFER_CALLS</a>,bytes);</div>
<div class="line"><span class="lineno">  303</span>}</div>
<div class="ttc" id="atransfers_8cpp_html_a14b788c3f735a7b27f2e949757f2cf6e"><div class="ttname"><a href="../../d9/dec/transfers_8cpp.html#a14b788c3f735a7b27f2e949757f2cf6e">TRANSFER_BYTES</a></div><div class="ttdeci">size_t TRANSFER_BYTES</div><div class="ttdef"><b>Definition</b> <a href="../../d9/dec/transfers_8cpp_source.html#l00013">transfers.cpp:13</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/dec/transfers_8cpp_source.html#l00013">TRANSFER_BYTES</a>, <a class="el" href="../../d9/dec/transfers_8cpp_source.html#l00009">TRANSFER_CALLS</a>, and <a class="el" href="../../d1/dc2/ccamb_8c_source.html#l00020">world_rank</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d15/driver_8cpp_source.html#l00123">parallel()</a>.</p>

</div>
</div>
<a id="a3be1b15261819bb255780e9c34d6ad31" name="a3be1b15261819bb255780e9c34d6ad31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3be1b15261819bb255780e9c34d6ad31">&#9670;&#160;</a></span>printTransferTimes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HACCGPM::parallel::printTransferTimes </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>world_rank</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/dec/transfers_8cpp_source.html#l00305">305</a> of file <a class="el" href="../../d9/dec/transfers_8cpp_source.html">transfers.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  305</span>                                                      {</div>
<div class="line"><span class="lineno">  306</span>    MPI_Barrier(MPI_COMM_WORLD);</div>
<div class="line"><span class="lineno">  307</span>    <a class="code hl_typedef" href="../../da/d0d/haccgpm_8hpp.html#aa790b6767cf9152c32b179d29c46e3ef">CPUTimer_t</a> total_min,total_max,total_mean,gpu_min,gpu_max,gpu_mean,mpi_min,mpi_max,mpi_mean;</div>
<div class="line"><span class="lineno">  308</span>    <a class="code hl_function" href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html#a988a5e3e292fca5fb93bd5c754ff9e3c">HACCGPM::parallel::timing_stats</a>(<a class="code hl_variable" href="../../d9/dec/transfers_8cpp.html#ad2e607ddb933c7b589bdc62eaa542044">TRANSFER_TIME</a>,&amp;total_min,&amp;total_max,&amp;total_mean);</div>
<div class="line"><span class="lineno">  309</span>    <a class="code hl_function" href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html#a988a5e3e292fca5fb93bd5c754ff9e3c">HACCGPM::parallel::timing_stats</a>(<a class="code hl_variable" href="../../d9/dec/transfers_8cpp.html#a786261e6f4b64c51b4aba20b05999f15">TRANSFER_GPU_TIME</a>,&amp;gpu_min,&amp;gpu_max,&amp;gpu_mean);</div>
<div class="line"><span class="lineno">  310</span>    <a class="code hl_function" href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html#a988a5e3e292fca5fb93bd5c754ff9e3c">HACCGPM::parallel::timing_stats</a>(<a class="code hl_variable" href="../../d9/dec/transfers_8cpp.html#a95c41c3b9c2138c4fbbb17b459b08a22">TRANSFER_MPI_TIME</a>,&amp;mpi_min,&amp;mpi_max,&amp;mpi_mean);</div>
<div class="line"><span class="lineno">  311</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d1/dc2/ccamb_8c.html#a0be0ed3102aab1d72782301d75cf570b">world_rank</a> != 0)<span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  312</span>    printf(<span class="stringliteral">&quot;   transferParticles  -&gt; calls: %d\n&quot;</span>,<a class="code hl_variable" href="../../d9/dec/transfers_8cpp.html#a4dc572e7a9c13a695ed78af5920c07a5">TRANSFER_CALLS</a>);</div>
<div class="line"><span class="lineno">  313</span>    printf(<span class="stringliteral">&quot;                               total: %10llu us mean | %10llu us max  | %10llu us min  |\n&quot;</span>,total_mean,total_max,total_min);</div>
<div class="line"><span class="lineno">  314</span>    printf(<span class="stringliteral">&quot;                                 cpu: %10llu us mean | %10llu us max  | %10llu us min  |\n&quot;</span>,(total_mean-gpu_mean) - mpi_mean,(total_max - gpu_max) - mpi_max, (total_min - gpu_min) - mpi_min);</div>
<div class="line"><span class="lineno">  315</span>    printf(<span class="stringliteral">&quot;                                 gpu: %10llu us mean | %10llu us max  | %10llu us min  |\n&quot;</span>,gpu_mean,gpu_max,gpu_min);</div>
<div class="line"><span class="lineno">  316</span>    printf(<span class="stringliteral">&quot;                                 mpi: %10llu us mean | %10llu us max  | %10llu us min  |\n&quot;</span>,mpi_mean,mpi_max,mpi_min);</div>
<div class="line"><span class="lineno">  317</span>    printf(<span class="stringliteral">&quot;                                 avg: %10llu us mean | %10llu us max  | %10llu us min  |\n&quot;</span>,total_mean / <a class="code hl_variable" href="../../d9/dec/transfers_8cpp.html#a4dc572e7a9c13a695ed78af5920c07a5">TRANSFER_CALLS</a>,total_max / <a class="code hl_variable" href="../../d9/dec/transfers_8cpp.html#a4dc572e7a9c13a695ed78af5920c07a5">TRANSFER_CALLS</a>,total_min / <a class="code hl_variable" href="../../d9/dec/transfers_8cpp.html#a4dc572e7a9c13a695ed78af5920c07a5">TRANSFER_CALLS</a>);</div>
<div class="line"><span class="lineno">  318</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/db4/timers_8cpp_source.html#l00006">timing_stats()</a>, <a class="el" href="../../d9/dec/transfers_8cpp_source.html#l00009">TRANSFER_CALLS</a>, <a class="el" href="../../d9/dec/transfers_8cpp_source.html#l00012">TRANSFER_GPU_TIME</a>, <a class="el" href="../../d9/dec/transfers_8cpp_source.html#l00011">TRANSFER_MPI_TIME</a>, <a class="el" href="../../d9/dec/transfers_8cpp_source.html#l00010">TRANSFER_TIME</a>, and <a class="el" href="../../d1/dc2/ccamb_8c_source.html#l00020">world_rank</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d15/driver_8cpp_source.html#l00123">parallel()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/d3f/namespaceHACCGPM_1_1parallel_a3be1b15261819bb255780e9c34d6ad31_cgraph.png" border="0" usemap="#ad1/d3f/namespaceHACCGPM_1_1parallel_a3be1b15261819bb255780e9c34d6ad31_cgraph" alt=""/></div>
<map name="ad1/d3f/namespaceHACCGPM_1_1parallel_a3be1b15261819bb255780e9c34d6ad31_cgraph" id="ad1/d3f/namespaceHACCGPM_1_1parallel_a3be1b15261819bb255780e9c34d6ad31_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,153,45"/>
<area shape="rect" href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html#a988a5e3e292fca5fb93bd5c754ff9e3c" title=" " alt="" coords="201,5,349,45"/>
<area shape="poly" title=" " alt="" coords="153,23,188,23,188,28,153,28"/>
</map>
</div>

</div>
</div>
<a id="a988a5e3e292fca5fb93bd5c754ff9e3c" name="a988a5e3e292fca5fb93bd5c754ff9e3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a988a5e3e292fca5fb93bd5c754ff9e3c">&#9670;&#160;</a></span>timing_stats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HACCGPM::parallel::timing_stats </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../da/d0d/haccgpm_8hpp.html#aa790b6767cf9152c32b179d29c46e3ef">CPUTimer_t</a>&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d0d/haccgpm_8hpp.html#aa790b6767cf9152c32b179d29c46e3ef">CPUTimer_t</a> *&#160;</td>
          <td class="paramname"><em>mint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d0d/haccgpm_8hpp.html#aa790b6767cf9152c32b179d29c46e3ef">CPUTimer_t</a> *&#160;</td>
          <td class="paramname"><em>maxt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d0d/haccgpm_8hpp.html#aa790b6767cf9152c32b179d29c46e3ef">CPUTimer_t</a> *&#160;</td>
          <td class="paramname"><em>meant</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/db4/timers_8cpp_source.html#l00006">6</a> of file <a class="el" href="../../d2/db4/timers_8cpp_source.html">timers.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">    6</span>                                                                                                      {</div>
<div class="line"><span class="lineno">    7</span>    MPI_Barrier(MPI_COMM_WORLD);</div>
<div class="line"><span class="lineno">    8</span>    <a class="code hl_typedef" href="../../da/d0d/haccgpm_8hpp.html#aa790b6767cf9152c32b179d29c46e3ef">CPUTimer_t</a> t = t_;</div>
<div class="line"><span class="lineno">    9</span>    MPI_Reduce(&amp;t,mint,1,MPI_UNSIGNED_LONG_LONG,MPI_MIN,0,MPI_COMM_WORLD);</div>
<div class="line"><span class="lineno">   10</span>    MPI_Barrier(MPI_COMM_WORLD);</div>
<div class="line"><span class="lineno">   11</span>    t = t_;</div>
<div class="line"><span class="lineno">   12</span>    MPI_Reduce(&amp;t,maxt,1,MPI_UNSIGNED_LONG_LONG,MPI_MAX,0,MPI_COMM_WORLD);</div>
<div class="line"><span class="lineno">   13</span>    MPI_Barrier(MPI_COMM_WORLD);</div>
<div class="line"><span class="lineno">   14</span>    t = t_;</div>
<div class="line"><span class="lineno">   15</span>    MPI_Reduce(&amp;t,meant,1,MPI_UNSIGNED_LONG_LONG,MPI_SUM,0,MPI_COMM_WORLD);</div>
<div class="line"><span class="lineno">   16</span>    MPI_Barrier(MPI_COMM_WORLD);</div>
<div class="line"><span class="lineno">   17</span>    <span class="keywordtype">int</span> comm_size;</div>
<div class="line"><span class="lineno">   18</span>    MPI_Comm_size(MPI_COMM_WORLD,&amp;comm_size);</div>
<div class="line"><span class="lineno">   19</span>    *meant /= comm_size;</div>
<div class="line"><span class="lineno">   20</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d5/d15/driver_8cpp_source.html#l00123">parallel()</a>, <a class="el" href="../../d6/dce/cic_8cu_source.html#l00248">printCICTimes()</a>, <a class="el" href="../../d4/df7/swfftmanager_8cpp_source.html#l00088">printFFTStats()</a>, and <a class="el" href="../../d9/dec/transfers_8cpp_source.html#l00305">printTransferTimes()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d5/d1c/namespaceHACCGPM.html">HACCGPM</a></li><li class="navelem"><a class="el" href="../../d1/d3f/namespaceHACCGPM_1_1parallel.html">parallel</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
